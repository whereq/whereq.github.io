<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha256-5eIC48iZUHmSlSUz9XtjRyK2mzQkHScZY1WdMaoz74E=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"www.whereq.com","root":"/","images":"/images","scheme":"Gemini","darkmode":true,"version":"8.21.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="Deep Dive into Memory Cache Design and Implementation in Spring Boot Microservice ApplicationsTable of Contents Deep Dive into Memory Cache Design and Implementation in Spring Boot Microservice Applic">
<meta property="og:type" content="article">
<meta property="og:title" content="Deep Dive into Memory Cache in Spring Boot Application">
<meta property="og:url" content="https://www.whereq.com/2024/10/27/Deep-Dive-into-Memory-Cache-in-Spring-Boot-Application/index.html">
<meta property="og:site_name" content="WhereQ">
<meta property="og:description" content="Deep Dive into Memory Cache Design and Implementation in Spring Boot Microservice ApplicationsTable of Contents Deep Dive into Memory Cache Design and Implementation in Spring Boot Microservice Applic">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2024-10-27T15:32:05.000Z">
<meta property="article:modified_time" content="2024-10-27T18:29:11.333Z">
<meta property="article:author" content="Dazhi Zhang">
<meta property="article:tag" content="Microservice">
<meta property="article:tag" content="Deep Dive">
<meta property="article:tag" content="Spring Boot">
<meta property="article:tag" content="Cache">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://www.whereq.com/2024/10/27/Deep-Dive-into-Memory-Cache-in-Spring-Boot-Application/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://www.whereq.com/2024/10/27/Deep-Dive-into-Memory-Cache-in-Spring-Boot-Application/","path":"2024/10/27/Deep-Dive-into-Memory-Cache-in-Spring-Boot-Application/","title":"Deep Dive into Memory Cache in Spring Boot Application"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Deep Dive into Memory Cache in Spring Boot Application | WhereQ</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">WhereQ</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-articles"><a href="/articles/" rel="section"><i class="fa fa-file fa-fw"></i>Articles</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Deep-Dive-into-Memory-Cache-Design-and-Implementation-in-Spring-Boot-Microservice-Applications"><span class="nav-number">1.</span> <span class="nav-text">Deep Dive into Memory Cache Design and Implementation in Spring Boot Microservice Applications</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Table-of-Contents"><span class="nav-number">1.1.</span> <span class="nav-text">Table of Contents</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Introduction"><span class="nav-number">1.2.</span> <span class="nav-text">Introduction</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Understanding-Memory-Cache"><span class="nav-number">1.3.</span> <span class="nav-text">Understanding Memory Cache</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Key-Concepts"><span class="nav-number">1.3.1.</span> <span class="nav-text">Key Concepts</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Cache-Design-Principles"><span class="nav-number">1.4.</span> <span class="nav-text">Cache Design Principles</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-Cache-Hit-and-Miss"><span class="nav-number">1.4.1.</span> <span class="nav-text">1. Cache Hit and Miss</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-Cache-Eviction-Policies"><span class="nav-number">1.4.2.</span> <span class="nav-text">2. Cache Eviction Policies</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-Cache-Invalidation"><span class="nav-number">1.4.3.</span> <span class="nav-text">3. Cache Invalidation</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Cache-Implementation-in-Spring-Boot"><span class="nav-number">1.5.</span> <span class="nav-text">Cache Implementation in Spring Boot</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Spring-Boot-Cache-Abstraction"><span class="nav-number">1.5.1.</span> <span class="nav-text">Spring Boot Cache Abstraction</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Caffeine-Cache-Integration"><span class="nav-number">1.5.2.</span> <span class="nav-text">Caffeine Cache Integration</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Cache-Configuration"><span class="nav-number">1.5.3.</span> <span class="nav-text">Cache Configuration</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#YAML-Configuration"><span class="nav-number">1.5.4.</span> <span class="nav-text">YAML Configuration</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Detailed-Logic-in-Caffeine-Cache"><span class="nav-number">1.5.5.</span> <span class="nav-text">Detailed Logic in Caffeine Cache</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Cache-Lookup"><span class="nav-number">1.5.5.1.</span> <span class="nav-text">Cache Lookup</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Cache-Miss-and-Method-Execution"><span class="nav-number">1.5.5.2.</span> <span class="nav-text">Cache Miss and Method Execution</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Cache-Update"><span class="nav-number">1.5.5.3.</span> <span class="nav-text">Cache Update</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Microservice-Architecture-and-Cache"><span class="nav-number">1.6.</span> <span class="nav-text">Microservice Architecture and Cache</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Cache-Consistency"><span class="nav-number">1.6.1.</span> <span class="nav-text">Cache Consistency</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Cache-Eviction-Strategies"><span class="nav-number">1.6.2.</span> <span class="nav-text">Cache Eviction Strategies</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Complex-Scenario-1-Flow-Control-and-Backpressure-Handling"><span class="nav-number">1.7.</span> <span class="nav-text">Complex Scenario 1: Flow Control and Backpressure Handling</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Problem-Statement"><span class="nav-number">1.7.1.</span> <span class="nav-text">Problem Statement</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Solution-Architecture"><span class="nav-number">1.7.2.</span> <span class="nav-text">Solution Architecture</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Flow-Chart"><span class="nav-number">1.7.3.</span> <span class="nav-text">Flow Chart</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Sample-Code"><span class="nav-number">1.7.4.</span> <span class="nav-text">Sample Code</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Complex-Scenario-2-Cache-Invalidation-and-Data-Synchronization"><span class="nav-number">1.8.</span> <span class="nav-text">Complex Scenario 2: Cache Invalidation and Data Synchronization</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Problem-Statement-1"><span class="nav-number">1.8.1.</span> <span class="nav-text">Problem Statement</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Solution-Architecture-1"><span class="nav-number">1.8.2.</span> <span class="nav-text">Solution Architecture</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Sequence-Diagram"><span class="nav-number">1.8.3.</span> <span class="nav-text">Sequence Diagram</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Sample-Code-1"><span class="nav-number">1.8.4.</span> <span class="nav-text">Sample Code</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Complex-Scenario-3-Cache-Stampede-Prevention"><span class="nav-number">1.9.</span> <span class="nav-text">Complex Scenario 3: Cache Stampede Prevention</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Problem-Statement-2"><span class="nav-number">1.9.1.</span> <span class="nav-text">Problem Statement</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Solution-Architecture-2"><span class="nav-number">1.9.2.</span> <span class="nav-text">Solution Architecture</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Flow-Chart-1"><span class="nav-number">1.9.3.</span> <span class="nav-text">Flow Chart</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Sample-Code-2"><span class="nav-number">1.9.4.</span> <span class="nav-text">Sample Code</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Real-Life-Production-Use-Cases"><span class="nav-number">1.10.</span> <span class="nav-text">Real-Life Production Use Cases</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-User-Profile-Caching"><span class="nav-number">1.10.1.</span> <span class="nav-text">1. User Profile Caching</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-Product-Catalog-Caching"><span class="nav-number">1.10.2.</span> <span class="nav-text">2. Product Catalog Caching</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-API-Response-Caching"><span class="nav-number">1.10.3.</span> <span class="nav-text">3. API Response Caching</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-Session-Data-Caching"><span class="nav-number">1.10.4.</span> <span class="nav-text">4. Session Data Caching</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Sample-Code-3"><span class="nav-number">1.11.</span> <span class="nav-text">Sample Code</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Caffeine-Cache-Configuration"><span class="nav-number">1.11.1.</span> <span class="nav-text">Caffeine Cache Configuration</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#User-Service-with-Caching"><span class="nav-number">1.11.2.</span> <span class="nav-text">User Service with Caching</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Rate-Limiting-for-Cache-Access"><span class="nav-number">1.12.</span> <span class="nav-text">Rate Limiting for Cache Access</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Why-Rate-Limiting-is-Needed"><span class="nav-number">1.12.1.</span> <span class="nav-text">Why Rate Limiting is Needed</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Example-Rate-Limiting-with-Spring-Boot"><span class="nav-number">1.12.2.</span> <span class="nav-text">Example: Rate Limiting with Spring Boot</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Add-Dependencies"><span class="nav-number">1.12.2.1.</span> <span class="nav-text">Add Dependencies</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Rate-Limiting-Configuration"><span class="nav-number">1.12.2.2.</span> <span class="nav-text">Rate Limiting Configuration</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Service-Implementation-with-Rate-Limiting"><span class="nav-number">1.12.2.3.</span> <span class="nav-text">Service Implementation with Rate Limiting</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Explanation"><span class="nav-number">1.12.3.</span> <span class="nav-text">Explanation</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Conclusion"><span class="nav-number">1.12.4.</span> <span class="nav-text">Conclusion</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Conclusion-1"><span class="nav-number">1.13.</span> <span class="nav-text">Conclusion</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Dazhi Zhang</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">99</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">88</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">54</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://www.whereq.com/2024/10/27/Deep-Dive-into-Memory-Cache-in-Spring-Boot-Application/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Dazhi Zhang">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WhereQ">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Deep Dive into Memory Cache in Spring Boot Application | WhereQ">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Deep Dive into Memory Cache in Spring Boot Application
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2024-10-27 11:32:05 / Modified: 14:29:11" itemprop="dateCreated datePublished" datetime="2024-10-27T11:32:05-04:00">2024-10-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Deep-Dive/" itemprop="url" rel="index"><span itemprop="name">Deep Dive</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Deep-Dive/Cache/" itemprop="url" rel="index"><span itemprop="name">Cache</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Deep-Dive/Cache/Spring-Boot/" itemprop="url" rel="index"><span itemprop="name">Spring Boot</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Deep-Dive/Cache/Spring-Boot/Microservice/" itemprop="url" rel="index"><span itemprop="name">Microservice</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h1 id="Deep-Dive-into-Memory-Cache-Design-and-Implementation-in-Spring-Boot-Microservice-Applications"><a href="#Deep-Dive-into-Memory-Cache-Design-and-Implementation-in-Spring-Boot-Microservice-Applications" class="headerlink" title="Deep Dive into Memory Cache Design and Implementation in Spring Boot Microservice Applications"></a>Deep Dive into Memory Cache Design and Implementation in Spring Boot Microservice Applications</h1><h2 id="Table-of-Contents"><a href="#Table-of-Contents" class="headerlink" title="Table of Contents"></a>Table of Contents</h2><ul>
<li><a href="#deep-dive-into-memory-cache-design-and-implementation-in-spring-boot-microservice-applications">Deep Dive into Memory Cache Design and Implementation in Spring Boot Microservice Applications</a><ul>
<li><a href="#table-of-contents">Table of Contents</a></li>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#understanding-memory-cache">Understanding Memory Cache</a><ul>
<li><a href="#key-concepts">Key Concepts</a></li>
</ul>
</li>
<li><a href="#cache-design-principles">Cache Design Principles</a><ul>
<li><a href="#1-cache-hit-and-miss">1. <strong>Cache Hit and Miss</strong></a></li>
<li><a href="#2-cache-eviction-policies">2. <strong>Cache Eviction Policies</strong></a></li>
<li><a href="#3-cache-invalidation">3. <strong>Cache Invalidation</strong></a></li>
</ul>
</li>
<li><a href="#cache-implementation-in-spring-boot">Cache Implementation in Spring Boot</a><ul>
<li><a href="#spring-boot-cache-abstraction">Spring Boot Cache Abstraction</a></li>
<li><a href="#caffeine-cache-integration">Caffeine Cache Integration</a></li>
<li><a href="#cache-configuration">Cache Configuration</a></li>
<li><a href="#yaml-configuration">YAML Configuration</a></li>
<li><a href="#detailed-logic-in-caffeine-cache">Detailed Logic in Caffeine Cache</a><ul>
<li><a href="#cache-lookup">Cache Lookup</a></li>
<li><a href="#cache-miss-and-method-execution">Cache Miss and Method Execution</a></li>
<li><a href="#cache-update">Cache Update</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#microservice-architecture-and-cache">Microservice Architecture and Cache</a><ul>
<li><a href="#cache-consistency">Cache Consistency</a></li>
<li><a href="#cache-eviction-strategies">Cache Eviction Strategies</a></li>
</ul>
</li>
<li><a href="#complex-scenario-1-flow-control-and-backpressure-handling">Complex Scenario 1: Flow Control and Backpressure Handling</a><ul>
<li><a href="#problem-statement">Problem Statement</a></li>
<li><a href="#solution-architecture">Solution Architecture</a></li>
<li><a href="#flow-chart">Flow Chart</a></li>
<li><a href="#sample-code">Sample Code</a></li>
</ul>
</li>
<li><a href="#complex-scenario-2-cache-invalidation-and-data-synchronization">Complex Scenario 2: Cache Invalidation and Data Synchronization</a><ul>
<li><a href="#problem-statement-1">Problem Statement</a></li>
<li><a href="#solution-architecture-1">Solution Architecture</a></li>
<li><a href="#sequence-diagram">Sequence Diagram</a></li>
<li><a href="#sample-code-1">Sample Code</a></li>
</ul>
</li>
<li><a href="#complex-scenario-3-cache-stampede-prevention">Complex Scenario 3: Cache Stampede Prevention</a><ul>
<li><a href="#problem-statement-2">Problem Statement</a></li>
<li><a href="#solution-architecture-2">Solution Architecture</a></li>
<li><a href="#flow-chart-1">Flow Chart</a></li>
<li><a href="#sample-code-2">Sample Code</a></li>
</ul>
</li>
<li><a href="#real-life-production-use-cases">Real-Life Production Use Cases</a><ul>
<li><a href="#1-user-profile-caching">1. <strong>User Profile Caching</strong></a></li>
<li><a href="#2-product-catalog-caching">2. <strong>Product Catalog Caching</strong></a></li>
<li><a href="#3-api-response-caching">3. <strong>API Response Caching</strong></a></li>
<li><a href="#4-session-data-caching">4. <strong>Session Data Caching</strong></a></li>
</ul>
</li>
<li><a href="#sample-code-3">Sample Code</a><ul>
<li><a href="#caffeine-cache-configuration">Caffeine Cache Configuration</a></li>
<li><a href="#user-service-with-caching">User Service with Caching</a></li>
</ul>
</li>
<li><a href="#rate-limiting-for-cache-access">Rate Limiting for Cache Access</a><ul>
<li><a href="#why-rate-limiting-is-needed">Why Rate Limiting is Needed</a></li>
<li><a href="#example-rate-limiting-with-spring-boot">Example: Rate Limiting with Spring Boot</a><ul>
<li><a href="#add-dependencies">Add Dependencies</a></li>
<li><a href="#rate-limiting-configuration">Rate Limiting Configuration</a></li>
<li><a href="#service-implementation-with-rate-limiting">Service Implementation with Rate Limiting</a></li>
</ul>
</li>
<li><a href="#explanation">Explanation</a></li>
<li><a href="#conclusion">Conclusion</a></li>
</ul>
</li>
<li><a href="#conclusion-1">Conclusion</a></li>
</ul>
</li>
</ul>
<hr>
<p><a name="introduction"></a></p>
<h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>In modern microservice architectures, performance and scalability are critical. Memory caching is a powerful technique to improve application performance by reducing the load on databases and other backend services. This article delves into the design and implementation of memory caches in Spring Boot applications, focusing on real-life project scenarios and the latest technology stack.</p>
<hr>
<p><a name="understanding-memory-cache"></a></p>
<h2 id="Understanding-Memory-Cache"><a href="#Understanding-Memory-Cache" class="headerlink" title="Understanding Memory Cache"></a>Understanding Memory Cache</h2><p>A memory cache is a high-speed data storage layer that stores a subset of data, typically transient in nature, so that future requests for that data are served faster. Caching can significantly improve the performance and scalability of applications by reducing the need to access slower underlying storage layers.</p>
<h3 id="Key-Concepts"><a href="#Key-Concepts" class="headerlink" title="Key Concepts"></a>Key Concepts</h3><ul>
<li><strong>Cache Hit</strong>: When the requested data is found in the cache.</li>
<li><strong>Cache Miss</strong>: When the requested data is not found in the cache.</li>
<li><strong>Cache Eviction</strong>: The process of removing data from the cache to make room for new data.</li>
</ul>
<hr>
<p><a name="cache-design-principles"></a></p>
<h2 id="Cache-Design-Principles"><a href="#Cache-Design-Principles" class="headerlink" title="Cache Design Principles"></a>Cache Design Principles</h2><h3 id="1-Cache-Hit-and-Miss"><a href="#1-Cache-Hit-and-Miss" class="headerlink" title="1. Cache Hit and Miss"></a>1. <strong>Cache Hit and Miss</strong></h3><ul>
<li><strong>Cache Hit</strong>: When the requested data is found in the cache.</li>
<li><strong>Cache Miss</strong>: When the requested data is not found in the cache.</li>
</ul>
<h3 id="2-Cache-Eviction-Policies"><a href="#2-Cache-Eviction-Policies" class="headerlink" title="2. Cache Eviction Policies"></a>2. <strong>Cache Eviction Policies</strong></h3><ul>
<li><strong>Least Recently Used (LRU)</strong>: Removes the least recently used items first.</li>
<li><strong>First In, First Out (FIFO)</strong>: Removes the oldest items first.</li>
<li><strong>Least Frequently Used (LFU)</strong>: Removes the least frequently used items first.</li>
</ul>
<h3 id="3-Cache-Invalidation"><a href="#3-Cache-Invalidation" class="headerlink" title="3. Cache Invalidation"></a>3. <strong>Cache Invalidation</strong></h3><ul>
<li><strong>Time-to-Live (TTL)</strong>: Data is automatically invalidated after a certain period.</li>
<li><strong>Event-Driven Invalidation</strong>: Data is invalidated based on specific events (e.g., data updates).</li>
</ul>
<hr>
<p><a name="cache-implementation-in-spring-boot"></a></p>
<h2 id="Cache-Implementation-in-Spring-Boot"><a href="#Cache-Implementation-in-Spring-Boot" class="headerlink" title="Cache Implementation in Spring Boot"></a>Cache Implementation in Spring Boot</h2><h3 id="Spring-Boot-Cache-Abstraction"><a href="#Spring-Boot-Cache-Abstraction" class="headerlink" title="Spring Boot Cache Abstraction"></a><a name="spring-boot-cache-abstraction"></a>Spring Boot Cache Abstraction</h3><p>Spring Boot provides a powerful cache abstraction that allows you to apply caching to your methods with minimal configuration. The core annotation is <code>@Cacheable</code>, which caches the result of a method invocation.</p>
<h3 id="Caffeine-Cache-Integration"><a href="#Caffeine-Cache-Integration" class="headerlink" title="Caffeine Cache Integration"></a><a name="caffeine-cache-integration"></a>Caffeine Cache Integration</h3><p>Caffeine is a high-performance, near-optimal caching library for Java. It is widely used in Spring Boot applications due to its efficiency and ease of integration.</p>
<h3 id="Cache-Configuration"><a href="#Cache-Configuration" class="headerlink" title="Cache Configuration"></a><a name="cache-configuration"></a>Cache Configuration</h3><p>To configure Caffeine cache in a Spring Boot application, you need to add the following dependencies:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-cache<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.ben-manes.caffeine<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>caffeine<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Next, enable caching in your Spring Boot application by adding the <code>@EnableCaching</code> annotation to your main application class:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cache.annotation.EnableCaching;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableCaching</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Application</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(Application.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="YAML-Configuration"><a href="#YAML-Configuration" class="headerlink" title="YAML Configuration"></a><a name="yaml-configuration"></a>YAML Configuration</h3><p>You can also configure Caffeine cache using YAML:</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cache:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">caffeine</span></span><br><span class="line">    <span class="attr">cache-names:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">userCache</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">productCache</span></span><br><span class="line">    <span class="attr">caffeine:</span></span><br><span class="line">      <span class="attr">spec:</span> <span class="string">maximumSize=500,expireAfterAccess=600s</span></span><br></pre></td></tr></table></figure>

<h3 id="Detailed-Logic-in-Caffeine-Cache"><a href="#Detailed-Logic-in-Caffeine-Cache" class="headerlink" title="Detailed Logic in Caffeine Cache"></a>Detailed Logic in Caffeine Cache</h3><p>When you annotate a method with <code>@Cacheable</code> in Spring Boot, the cache manager will first check if the requested data is already present in the specified cache. If the data is found, it will be returned immediately, bypassing the method’s execution. If the data is not found, the method will be executed, and the result will be stored in the cache for future requests.</p>
<h4 id="Cache-Lookup"><a href="#Cache-Lookup" class="headerlink" title="Cache Lookup"></a>Cache Lookup</h4><p>Caffeine uses a <code>ConcurrentHashMap</code> to store cache entries. When a lookup is performed, Caffeine checks if the key exists in the map:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> V <span class="title function_">getIfPresent</span><span class="params">(Object key)</span> &#123;</span><br><span class="line">    Node&lt;K, V&gt; node = data.get(key);</span><br><span class="line">    <span class="keyword">if</span> (node == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// Additional logic for expiration and eviction checks</span></span><br><span class="line">    <span class="keyword">return</span> node.getValue();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Cache-Miss-and-Method-Execution"><a href="#Cache-Miss-and-Method-Execution" class="headerlink" title="Cache Miss and Method Execution"></a>Cache Miss and Method Execution</h4><p>If the key is not found in the cache, the method is executed, and the result is stored in the cache:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> V <span class="title function_">get</span><span class="params">(K key, Function&lt;? <span class="built_in">super</span> K, ? extends V&gt; mappingFunction)</span> &#123;</span><br><span class="line">    <span class="type">V</span> <span class="variable">value</span> <span class="operator">=</span> getIfPresent(key);</span><br><span class="line">    <span class="keyword">if</span> (value != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;</span><br><span class="line">    value = mappingFunction.apply(key);</span><br><span class="line">    put(key, value);</span><br><span class="line">    <span class="keyword">return</span> value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Cache-Update"><a href="#Cache-Update" class="headerlink" title="Cache Update"></a>Cache Update</h4><p>When the result is fetched from the database, it is stored in the cache:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">put</span><span class="params">(K key, V value)</span> &#123;</span><br><span class="line">    Node&lt;K, V&gt; node = <span class="keyword">new</span> <span class="title class_">Node</span>&lt;&gt;(key, value);</span><br><span class="line">    data.put(key, node);</span><br><span class="line">    <span class="comment">// Additional logic for eviction and expiration</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<p><a name="microservice-architecture-and-cache"></a></p>
<h2 id="Microservice-Architecture-and-Cache"><a href="#Microservice-Architecture-and-Cache" class="headerlink" title="Microservice Architecture and Cache"></a>Microservice Architecture and Cache</h2><h3 id="Cache-Consistency"><a href="#Cache-Consistency" class="headerlink" title="Cache Consistency"></a><a name="cache-consistency"></a>Cache Consistency</h3><p>Ensuring cache consistency is crucial in distributed systems. Techniques like cache invalidation, event-driven updates, and distributed locking can be used to maintain consistency.</p>
<h3 id="Cache-Eviction-Strategies"><a href="#Cache-Eviction-Strategies" class="headerlink" title="Cache Eviction Strategies"></a><a name="cache-eviction-strategies"></a>Cache Eviction Strategies</h3><p>Choosing the right eviction strategy is important. LRU is commonly used, but in scenarios with frequent updates, LFU or custom eviction policies might be more appropriate.</p>
<hr>
<p><a name="complex-scenario-1-flow-control-and-backpressure-handling"></a></p>
<h2 id="Complex-Scenario-1-Flow-Control-and-Backpressure-Handling"><a href="#Complex-Scenario-1-Flow-Control-and-Backpressure-Handling" class="headerlink" title="Complex Scenario 1: Flow Control and Backpressure Handling"></a>Complex Scenario 1: Flow Control and Backpressure Handling</h2><h3 id="Problem-Statement"><a href="#Problem-Statement" class="headerlink" title="Problem Statement"></a>Problem Statement</h3><p>In high-traffic scenarios, the cache might become a bottleneck if not properly managed. Flow control and backpressure handling are essential to prevent the cache from being overwhelmed.</p>
<h3 id="Solution-Architecture"><a href="#Solution-Architecture" class="headerlink" title="Solution Architecture"></a>Solution Architecture</h3><ol>
<li><strong>Rate Limiting</strong>: Implement rate limiting to control the number of requests hitting the cache.</li>
<li><strong>Circuit Breaker</strong>: Use a circuit breaker to handle failures gracefully and prevent cascading failures.</li>
<li><strong>Backpressure Handling</strong>: Implement backpressure mechanisms to manage the flow of data between services.</li>
</ol>
<h3 id="Flow-Chart"><a href="#Flow-Chart" class="headerlink" title="Flow Chart"></a>Flow Chart</h3><pre><code class="highlight mermaid">graph TD
    A[Client Request] --&gt; B&#123;Rate Limiter&#125;
    B --&gt;|Allowed| C[Cache Lookup]
    B --&gt;|Denied| D[Fallback to Database]
    C --&gt; E&#123;Cache Hit?&#125;
    E --&gt;|Yes| F[Return Cached Data]
    E --&gt;|No| G[Fetch from Database]
    G --&gt; H[Update Cache]
    H --&gt; F
    D --&gt; G</code></pre>

<h3 id="Sample-Code"><a href="#Sample-Code" class="headerlink" title="Sample Code"></a>Sample Code</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.cache.annotation.Cacheable;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Cacheable(value = &quot;userCache&quot;, key = &quot;#userId&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">getUserById</span><span class="params">(Long userId)</span> &#123;</span><br><span class="line">        <span class="comment">// Fetch user from database</span></span><br><span class="line">        <span class="keyword">return</span> fetchUserFromDatabase(userId);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> User <span class="title function_">fetchUserFromDatabase</span><span class="params">(Long userId)</span> &#123;</span><br><span class="line">        <span class="comment">// Database query logic</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<p><a name="complex-scenario-2-cache-invalidation-and-data-synchronization"></a></p>
<h2 id="Complex-Scenario-2-Cache-Invalidation-and-Data-Synchronization"><a href="#Complex-Scenario-2-Cache-Invalidation-and-Data-Synchronization" class="headerlink" title="Complex Scenario 2: Cache Invalidation and Data Synchronization"></a>Complex Scenario 2: Cache Invalidation and Data Synchronization</h2><h3 id="Problem-Statement-1"><a href="#Problem-Statement-1" class="headerlink" title="Problem Statement"></a>Problem Statement</h3><p>Ensuring that the cache remains consistent with the underlying data store is challenging, especially in distributed systems.</p>
<h3 id="Solution-Architecture-1"><a href="#Solution-Architecture-1" class="headerlink" title="Solution Architecture"></a>Solution Architecture</h3><ol>
<li><strong>Event-Driven Invalidation</strong>: Use event-driven mechanisms to invalidate the cache when data changes.</li>
<li><strong>Distributed Locking</strong>: Use distributed locking to ensure that only one service updates the cache at a time.</li>
<li><strong>TTL-Based Invalidation</strong>: Use Time-to-Live (TTL) to automatically invalidate cache entries after a certain period.</li>
</ol>
<h3 id="Sequence-Diagram"><a href="#Sequence-Diagram" class="headerlink" title="Sequence Diagram"></a>Sequence Diagram</h3><pre><code class="highlight mermaid">sequenceDiagram
    participant Client
    participant Service
    participant Cache
    participant Database

    Client-&gt;&gt;Service: Update User
    Service-&gt;&gt;Database: Update User in Database
    Database--&gt;&gt;Service: User Updated
    Service-&gt;&gt;Cache: Invalidate User Cache
    Cache--&gt;&gt;Service: Cache Invalidated
    Service--&gt;&gt;Client: User Updated</code></pre>

<h3 id="Sample-Code-1"><a href="#Sample-Code-1" class="headerlink" title="Sample Code"></a>Sample Code</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.cache.annotation.CacheEvict;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@CacheEvict(value = &quot;userCache&quot;, key = &quot;#userId&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateUser</span><span class="params">(Long userId, User user)</span> &#123;</span><br><span class="line">        <span class="comment">// Update user in database</span></span><br><span class="line">        updateUserInDatabase(userId, user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">updateUserInDatabase</span><span class="params">(Long userId, User user)</span> &#123;</span><br><span class="line">        <span class="comment">// Database update logic</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<p><a name="complex-scenario-3-cache-stampede-prevention"></a></p>
<h2 id="Complex-Scenario-3-Cache-Stampede-Prevention"><a href="#Complex-Scenario-3-Cache-Stampede-Prevention" class="headerlink" title="Complex Scenario 3: Cache Stampede Prevention"></a>Complex Scenario 3: Cache Stampede Prevention</h2><h3 id="Problem-Statement-2"><a href="#Problem-Statement-2" class="headerlink" title="Problem Statement"></a>Problem Statement</h3><p>A cache stampede occurs when multiple requests for the same data hit the cache simultaneously, leading to a spike in database load.</p>
<h3 id="Solution-Architecture-2"><a href="#Solution-Architecture-2" class="headerlink" title="Solution Architecture"></a>Solution Architecture</h3><ol>
<li><strong>Probabilistic Early Expiration</strong>: Use probabilistic early expiration to spread out cache expiration times.</li>
<li><strong>Locking Mechanism</strong>: Implement a locking mechanism to ensure that only one request populates the cache at a time.</li>
<li><strong>Background Refresh</strong>: Use background refresh to keep the cache up-to-date without impacting the user experience.</li>
</ol>
<h3 id="Flow-Chart-1"><a href="#Flow-Chart-1" class="headerlink" title="Flow Chart"></a>Flow Chart</h3><pre><code class="highlight mermaid">graph TD
    A[Client Request] --&gt; B&#123;Cache Hit?&#125;
    B --&gt;|Yes| C[Return Cached Data]
    B --&gt;|No| D&#123;Lock Acquired?&#125;
    D --&gt;|Yes| E[Fetch from Database]
    D --&gt;|No| F[Wait for Lock]
    E --&gt; G[Update Cache]
    G --&gt; C
    F --&gt; B</code></pre>

<h3 id="Sample-Code-2"><a href="#Sample-Code-2" class="headerlink" title="Sample Code"></a>Sample Code</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.cache.annotation.Cacheable;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.Lock;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.ReentrantLock;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">Lock</span> <span class="variable">lock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReentrantLock</span>();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Cacheable(value = &quot;userCache&quot;, key = &quot;#userId&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">getUserById</span><span class="params">(Long userId)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            lock.lock();</span><br><span class="line">            <span class="comment">// Double-check to ensure the cache is still empty</span></span><br><span class="line">            <span class="type">User</span> <span class="variable">cachedUser</span> <span class="operator">=</span> fetchUserFromCache(userId);</span><br><span class="line">            <span class="keyword">if</span> (cachedUser != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> cachedUser;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// Fetch user from database</span></span><br><span class="line">            <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> fetchUserFromDatabase(userId);</span><br><span class="line">            <span class="comment">// Update cache</span></span><br><span class="line">            updateCache(userId, user);</span><br><span class="line">            <span class="keyword">return</span> user;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> User <span class="title function_">fetchUserFromCache</span><span class="params">(Long userId)</span> &#123;</span><br><span class="line">        <span class="comment">// Cache lookup logic</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> User <span class="title function_">fetchUserFromDatabase</span><span class="params">(Long userId)</span> &#123;</span><br><span class="line">        <span class="comment">// Database query logic</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">updateCache</span><span class="params">(Long userId, User user)</span> &#123;</span><br><span class="line">        <span class="comment">// Cache update logic</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<p><a name="real-life-production-use-cases"></a></p>
<h2 id="Real-Life-Production-Use-Cases"><a href="#Real-Life-Production-Use-Cases" class="headerlink" title="Real-Life Production Use Cases"></a>Real-Life Production Use Cases</h2><h3 id="1-User-Profile-Caching"><a href="#1-User-Profile-Caching" class="headerlink" title="1. User Profile Caching"></a>1. <strong>User Profile Caching</strong></h3><p>In a social media application, user profiles are frequently accessed. Caching user profiles can significantly reduce the load on the database and improve response times.</p>
<h3 id="2-Product-Catalog-Caching"><a href="#2-Product-Catalog-Caching" class="headerlink" title="2. Product Catalog Caching"></a>2. <strong>Product Catalog Caching</strong></h3><p>In an e-commerce application, product catalogs are often large and frequently accessed. Caching product data can improve performance and reduce database load.</p>
<h3 id="3-API-Response-Caching"><a href="#3-API-Response-Caching" class="headerlink" title="3. API Response Caching"></a>3. <strong>API Response Caching</strong></h3><p>In microservices, caching API responses can reduce the number of calls to downstream services, improving overall system performance.</p>
<h3 id="4-Session-Data-Caching"><a href="#4-Session-Data-Caching" class="headerlink" title="4. Session Data Caching"></a>4. <strong>Session Data Caching</strong></h3><p>In applications with user sessions, caching session data can reduce the load on session storage systems and improve scalability.</p>
<hr>
<p><a name="sample-code"></a></p>
<h2 id="Sample-Code-3"><a href="#Sample-Code-3" class="headerlink" title="Sample Code"></a>Sample Code</h2><h3 id="Caffeine-Cache-Configuration"><a href="#Caffeine-Cache-Configuration" class="headerlink" title="Caffeine Cache Configuration"></a>Caffeine Cache Configuration</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.github.benmanes.caffeine.cache.Caffeine;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cache.CacheManager;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cache.caffeine.CaffeineCacheManager;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeUnit;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CacheConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> CacheManager <span class="title function_">cacheManager</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">CaffeineCacheManager</span> <span class="variable">cacheManager</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CaffeineCacheManager</span>(<span class="string">&quot;userCache&quot;</span>, <span class="string">&quot;productCache&quot;</span>);</span><br><span class="line">        cacheManager.setCaffeine(caffeineCacheBuilder());</span><br><span class="line">        <span class="keyword">return</span> cacheManager;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Caffeine&lt;Object, Object&gt; <span class="title function_">caffeineCacheBuilder</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Caffeine.newBuilder()</span><br><span class="line">                .maximumSize(<span class="number">500</span>)</span><br><span class="line">                .expireAfterAccess(<span class="number">600</span>, TimeUnit.SECONDS);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="User-Service-with-Caching"><a href="#User-Service-with-Caching" class="headerlink" title="User Service with Caching"></a>User Service with Caching</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.cache.annotation.Cacheable;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Cacheable(value = &quot;userCache&quot;, key = &quot;#userId&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">getUserById</span><span class="params">(Long userId)</span> &#123;</span><br><span class="line">        <span class="comment">// Fetch user from database</span></span><br><span class="line">        <span class="keyword">return</span> fetchUserFromDatabase(userId);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> User <span class="title function_">fetchUserFromDatabase</span><span class="params">(Long userId)</span> &#123;</span><br><span class="line">        <span class="comment">// Database query logic</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<p><a name="rate-limiting-for-cache-access"></a></p>
<h2 id="Rate-Limiting-for-Cache-Access"><a href="#Rate-Limiting-for-Cache-Access" class="headerlink" title="Rate Limiting for Cache Access"></a>Rate Limiting for Cache Access</h2><h3 id="Why-Rate-Limiting-is-Needed"><a href="#Why-Rate-Limiting-is-Needed" class="headerlink" title="Why Rate Limiting is Needed"></a>Why Rate Limiting is Needed</h3><p>Reading from a memory cache is generally very fast and should not be a bottleneck in terms of performance. However, there are several reasons why you might still want to implement rate limiting for cache access, even if the cache is in memory:</p>
<ol>
<li><p><strong>Resource Management</strong>: Even though reading from memory is fast, excessive concurrent requests can still consume a significant amount of CPU and memory resources. Rate limiting helps manage these resources more effectively, ensuring that the system remains responsive and does not become overwhelmed.</p>
</li>
<li><p><strong>Preventing Cache Stampede</strong>: While reading from the cache is fast, if the cache is not populated (cache miss), all concurrent requests will end up fetching the data from the database or another slow data source. This can lead to a cache stampede, where the database or other backend services are overwhelmed with requests. Rate limiting can help mitigate this by controlling the number of concurrent requests that can hit the cache.</p>
</li>
<li><p><strong>Graceful Degradation</strong>: In high-traffic scenarios, rate limiting ensures that the system can gracefully degrade its performance. By limiting the number of requests that can access the cache, you can prevent the system from becoming unresponsive or crashing under heavy load.</p>
</li>
<li><p><strong>Security and Denial of Service (DoS) Prevention</strong>: Rate limiting can also be a security measure to prevent Denial of Service (DoS) attacks. By limiting the number of requests from a single client or IP address, you can protect the system from being overwhelmed by malicious requests.</p>
</li>
<li><p><strong>Ensuring Fairness</strong>: Rate limiting ensures that all clients have fair access to the cache. Without rate limiting, a few clients with high request rates could monopolize the cache, leading to poor performance for other clients.</p>
</li>
<li><p><strong>Monitoring and Analytics</strong>: Rate limiting provides valuable data on the usage patterns of the cache. This data can be used for monitoring, analytics, and capacity planning.</p>
</li>
</ol>
<h3 id="Example-Rate-Limiting-with-Spring-Boot"><a href="#Example-Rate-Limiting-with-Spring-Boot" class="headerlink" title="Example: Rate Limiting with Spring Boot"></a>Example: Rate Limiting with Spring Boot</h3><p>Here’s an example of how you might implement rate limiting for cache access in a Spring Boot application using the <code>Bucket4j</code> library:</p>
<h4 id="Add-Dependencies"><a href="#Add-Dependencies" class="headerlink" title="Add Dependencies"></a>Add Dependencies</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.vladimir-bukhtoyarov<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>bucket4j-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>7.5.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="Rate-Limiting-Configuration"><a href="#Rate-Limiting-Configuration" class="headerlink" title="Rate Limiting Configuration"></a>Rate Limiting Configuration</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> io.github.bucket4j.Bandwidth;</span><br><span class="line"><span class="keyword">import</span> io.github.bucket4j.Bucket;</span><br><span class="line"><span class="keyword">import</span> io.github.bucket4j.Bucket4j;</span><br><span class="line"><span class="keyword">import</span> io.github.bucket4j.Refill;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.time.Duration;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RateLimitingConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Bucket <span class="title function_">cacheRateLimiter</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Bandwidth</span> <span class="variable">limit</span> <span class="operator">=</span> Bandwidth.classic(<span class="number">100</span>, Refill.greedy(<span class="number">100</span>, Duration.ofMinutes(<span class="number">1</span>)));</span><br><span class="line">        <span class="keyword">return</span> Bucket4j.builder().addLimit(limit).build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Service-Implementation-with-Rate-Limiting"><a href="#Service-Implementation-with-Rate-Limiting" class="headerlink" title="Service Implementation with Rate Limiting"></a>Service Implementation with Rate Limiting</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> io.github.bucket4j.Bucket;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cache.annotation.Cacheable;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> Bucket cacheRateLimiter;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Cacheable(value = &quot;userCache&quot;, key = &quot;#userId&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">getUserById</span><span class="params">(Long userId)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (cacheRateLimiter.tryConsume(<span class="number">1</span>)) &#123;</span><br><span class="line">            <span class="comment">// Fetch user from database</span></span><br><span class="line">            <span class="keyword">return</span> fetchUserFromDatabase(userId);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;Rate limit exceeded&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> User <span class="title function_">fetchUserFromDatabase</span><span class="params">(Long userId)</span> &#123;</span><br><span class="line">        <span class="comment">// Database query logic</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Explanation"><a href="#Explanation" class="headerlink" title="Explanation"></a>Explanation</h3><ol>
<li><strong>Bucket4j Configuration</strong>: The <code>Bucket4j</code> library is used to configure a rate limiter with a limit of 100 requests per minute.</li>
<li><strong>Service Implementation</strong>: The <code>getUserById</code> method checks if the rate limit has been exceeded before fetching the user from the database. If the limit is exceeded, it throws an exception.</li>
</ol>
<h3 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h3><p>While reading from a memory cache is fast and should not be a bottleneck, implementing rate limiting can provide several benefits, including resource management, preventing cache stampedes, ensuring fairness, and enhancing security. By using libraries like <code>Bucket4j</code>, you can easily implement rate limiting in your Spring Boot application to manage cache access effectively.</p>
<hr>
<p><a name="conclusion"></a></p>
<h2 id="Conclusion-1"><a href="#Conclusion-1" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>Memory caching is a powerful tool for improving the performance and scalability of Spring Boot applications in a microservice architecture. By understanding the principles of cache design and implementing best practices, you can effectively manage cache performance, consistency, and reliability in real-life projects.</p>
<p>This article provides a comprehensive guide to memory cache design and implementation in Spring Boot, covering various scenarios and best practices. Use the provided sample code and diagrams to implement efficient caching in your microservice architecture.</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Microservice/" rel="tag"><i class="fa fa-tag"></i> Microservice</a>
              <a href="/tags/Deep-Dive/" rel="tag"><i class="fa fa-tag"></i> Deep Dive</a>
              <a href="/tags/Spring-Boot/" rel="tag"><i class="fa fa-tag"></i> Spring Boot</a>
              <a href="/tags/Cache/" rel="tag"><i class="fa fa-tag"></i> Cache</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2024/10/26/Deep-Dive-into-java-util-function-Package/" rel="prev" title="Deep Dive into java.util.function Package">
                  <i class="fa fa-angle-left"></i> Deep Dive into java.util.function Package
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2024/10/27/Deep-Dive-into-Caffeine-Cache-and-Integration-with-Spring-Boot/" rel="next" title="Deep Dive into Caffeine Cache and Integration with Spring Boot">
                  Deep Dive into Caffeine Cache and Integration with Spring Boot <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Dazhi Zhang</span>
  </div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  

  <script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"default","dark":"dark"},"js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.9.1/mermaid.min.js","integrity":"sha256-YbM1pG3wWnzhyYN49g5fPnen+2CKEFaZfopkkwSpNtY="}}</script>
  <script src="/js/third-party/tags/mermaid.js"></script>





  





</body>
</html>
