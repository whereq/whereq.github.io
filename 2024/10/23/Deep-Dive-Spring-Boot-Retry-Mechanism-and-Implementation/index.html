<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha256-5eIC48iZUHmSlSUz9XtjRyK2mzQkHScZY1WdMaoz74E=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"www.whereq.com","root":"/","images":"/images","scheme":"Gemini","darkmode":true,"version":"8.21.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="Spring Boot Retry Mechanism - Detailed Guide with Sample Code 1. Introduction to Spring Retry Key Features:   2. How Retry Mechanism Works Flow of Retry Mechanism:   3. Plain Retry Implementation usi">
<meta property="og:type" content="article">
<meta property="og:title" content="Deep Dive Spring Boot Retry Mechanism and Implementation">
<meta property="og:url" content="https://www.whereq.com/2024/10/23/Deep-Dive-Spring-Boot-Retry-Mechanism-and-Implementation/index.html">
<meta property="og:site_name" content="WhereQ">
<meta property="og:description" content="Spring Boot Retry Mechanism - Detailed Guide with Sample Code 1. Introduction to Spring Retry Key Features:   2. How Retry Mechanism Works Flow of Retry Mechanism:   3. Plain Retry Implementation usi">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2024-10-24T00:52:55.000Z">
<meta property="article:modified_time" content="2024-10-25T20:55:50.509Z">
<meta property="article:author" content="Dazhi Zhang">
<meta property="article:tag" content="Spring Boot">
<meta property="article:tag" content="WebFlux">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://www.whereq.com/2024/10/23/Deep-Dive-Spring-Boot-Retry-Mechanism-and-Implementation/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://www.whereq.com/2024/10/23/Deep-Dive-Spring-Boot-Retry-Mechanism-and-Implementation/","path":"2024/10/23/Deep-Dive-Spring-Boot-Retry-Mechanism-and-Implementation/","title":"Deep Dive Spring Boot Retry Mechanism and Implementation"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Deep Dive Spring Boot Retry Mechanism and Implementation | WhereQ</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">WhereQ</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-articles"><a href="/articles/" rel="section"><i class="fa fa-file fa-fw"></i>Articles</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Spring-Boot-Retry-Mechanism-Detailed-Guide-with-Sample-Code"><span class="nav-number">1.</span> <span class="nav-text">Spring Boot Retry Mechanism - Detailed Guide with Sample Code</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-Introduction-to-Spring-Retry"><span class="nav-number">1.1.</span> <span class="nav-text">1. Introduction to Spring Retry</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Key-Features"><span class="nav-number">1.1.1.</span> <span class="nav-text">Key Features:</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-How-Retry-Mechanism-Works"><span class="nav-number">1.2.</span> <span class="nav-text">2. How Retry Mechanism Works</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Flow-of-Retry-Mechanism"><span class="nav-number">1.2.1.</span> <span class="nav-text">Flow of Retry Mechanism:</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-Plain-Retry-Implementation-using-RetryTemplate"><span class="nav-number">1.3.</span> <span class="nav-text">3. Plain Retry Implementation using RetryTemplate</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Step-by-Step-Guide"><span class="nav-number">1.3.1.</span> <span class="nav-text">Step-by-Step Guide:</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Key-Points"><span class="nav-number">1.3.2.</span> <span class="nav-text">Key Points:</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-Annotation-Based-Retry-Implementation-using-Retryable"><span class="nav-number">1.4.</span> <span class="nav-text">4. Annotation-Based Retry Implementation using @Retryable</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Step-by-Step-Guide-1"><span class="nav-number">1.4.1.</span> <span class="nav-text">Step-by-Step Guide:</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Key-Points-1"><span class="nav-number">1.4.2.</span> <span class="nav-text">Key Points:</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-Recovering-from-Failure-using-Recover"><span class="nav-number">1.5.</span> <span class="nav-text">5. Recovering from Failure using @Recover</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Key-Points-2"><span class="nav-number">1.5.1.</span> <span class="nav-text">Key Points:</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Advanced-Recovery"><span class="nav-number">1.5.2.</span> <span class="nav-text">Advanced Recovery:</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-Flowchart-Retry-Mechanism"><span class="nav-number">1.6.</span> <span class="nav-text">6. Flowchart: Retry Mechanism</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Key-Points-3"><span class="nav-number">1.6.1.</span> <span class="nav-text">Key Points:</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-Multiple-Recover-Methods"><span class="nav-number">1.7.</span> <span class="nav-text">7. Multiple Recover Methods</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Example-Multiple-Recover-Methods"><span class="nav-number">1.7.1.</span> <span class="nav-text">Example: Multiple @Recover Methods</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Key-Points-4"><span class="nav-number">1.7.2.</span> <span class="nav-text">Key Points:</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#How-It-Works"><span class="nav-number">1.7.3.</span> <span class="nav-text">How It Works:</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Summary"><span class="nav-number">1.7.4.</span> <span class="nav-text">Summary:</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-Conclusion"><span class="nav-number">1.8.</span> <span class="nav-text">8. Conclusion</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Key-Takeaways"><span class="nav-number">1.8.1.</span> <span class="nav-text">Key Takeaways:</span></a></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Dazhi Zhang</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">92</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">76</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">46</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://www.whereq.com/2024/10/23/Deep-Dive-Spring-Boot-Retry-Mechanism-and-Implementation/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Dazhi Zhang">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WhereQ">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Deep Dive Spring Boot Retry Mechanism and Implementation | WhereQ">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Deep Dive Spring Boot Retry Mechanism and Implementation
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2024-10-23 20:52:55" itemprop="dateCreated datePublished" datetime="2024-10-23T20:52:55-04:00">2024-10-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-10-25 16:55:50" itemprop="dateModified" datetime="2024-10-25T16:55:50-04:00">2024-10-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Spring-Boot/" itemprop="url" rel="index"><span itemprop="name">Spring Boot</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Spring-Boot/WebFlux/" itemprop="url" rel="index"><span itemprop="name">WebFlux</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><ul>
<li><a href="#spring-boot-retry-mechanism---detailed-guide-with-sample-code">Spring Boot Retry Mechanism - Detailed Guide with Sample Code</a><ul>
<li><a href="#1-introduction-to-spring-retry">1. Introduction to Spring Retry</a><ul>
<li><a href="#key-features">Key Features:</a></li>
</ul>
</li>
<li><a href="#2-how-retry-mechanism-works">2. How Retry Mechanism Works</a><ul>
<li><a href="#flow-of-retry-mechanism">Flow of Retry Mechanism:</a></li>
</ul>
</li>
<li><a href="#3-plain-retry-implementation-using-retrytemplate">3. Plain Retry Implementation using <code>RetryTemplate</code></a><ul>
<li><a href="#step-by-step-guide">Step-by-Step Guide:</a></li>
<li><a href="#key-points">Key Points:</a></li>
</ul>
</li>
<li><a href="#4-annotation-based-retry-implementation-using-retryable">4. Annotation-Based Retry Implementation using <code>@Retryable</code></a><ul>
<li><a href="#step-by-step-guide-1">Step-by-Step Guide:</a></li>
<li><a href="#key-points-1">Key Points:</a></li>
</ul>
</li>
<li><a href="#5-recovering-from-failure-using-recover">5. Recovering from Failure using <code>@Recover</code></a><ul>
<li><a href="#key-points-2">Key Points:</a></li>
<li><a href="#advanced-recovery">Advanced Recovery:</a></li>
</ul>
</li>
<li><a href="#6-flowchart-retry-mechanism">6. Flowchart: Retry Mechanism</a><ul>
<li><a href="#key-points-3">Key Points:</a></li>
</ul>
</li>
<li><a href="#7-multiple-recover-methods">7. Multiple Recover Methods</a><ul>
<li><a href="#example-multiple-recover-methods">Example: Multiple <code>@Recover</code> Methods</a></li>
<li><a href="#key-points-4">Key Points:</a></li>
<li><a href="#how-it-works">How It Works:</a></li>
<li><a href="#summary">Summary:</a></li>
</ul>
</li>
<li><a href="#8-conclusion">8. Conclusion</a><ul>
<li><a href="#key-takeaways">Key Takeaways:</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<hr>
<h1 id="Spring-Boot-Retry-Mechanism-Detailed-Guide-with-Sample-Code"><a href="#Spring-Boot-Retry-Mechanism-Detailed-Guide-with-Sample-Code" class="headerlink" title="Spring Boot Retry Mechanism - Detailed Guide with Sample Code"></a>Spring Boot Retry Mechanism - Detailed Guide with Sample Code</h1><hr>
<h2 id="1-Introduction-to-Spring-Retry"><a href="#1-Introduction-to-Spring-Retry" class="headerlink" title="1. Introduction to Spring Retry"></a>1. Introduction to Spring Retry</h2><p><a name="1-introduction-to-spring-retry"></a></p>
<p>Spring Boot provides a robust retry mechanism through the <strong>Spring Retry</strong> module. This module allows developers to automatically retry operations that fail due to certain exceptions, making it highly useful for handling transient faults in distributed systems, such as network issues, service unavailability, and more.</p>
<p>Spring Retry can be implemented in two primary ways:</p>
<ul>
<li><strong>Programmatically</strong> using <code>RetryTemplate</code>.</li>
<li><strong>Declaratively</strong> using the <code>@Retryable</code> annotation.</li>
</ul>
<p>Additionally, Spring Retry supports recovery methods using the <code>@Recover</code> annotation, which can be invoked when all retry attempts are exhausted.</p>
<h3 id="Key-Features"><a href="#Key-Features" class="headerlink" title="Key Features:"></a>Key Features:</h3><ul>
<li><strong>Retry Policies</strong>: Define the number of retry attempts and conditions for retrying.</li>
<li><strong>Backoff Policies</strong>: Implement delays between retries, including fixed, exponential, and custom backoff strategies.</li>
<li><strong>Exception Handling</strong>: Retry based on specific exceptions or generic conditions.</li>
<li><strong>Recovery Mechanism</strong>: Gracefully handle failures using <code>@Recover</code> methods.</li>
</ul>
<hr>
<h2 id="2-How-Retry-Mechanism-Works"><a href="#2-How-Retry-Mechanism-Works" class="headerlink" title="2. How Retry Mechanism Works"></a>2. How Retry Mechanism Works</h2><p><a name="2-how-retry-mechanism-works"></a></p>
<p>The retry mechanism in Spring operates as follows:</p>
<ul>
<li>When a method annotated with <code>@Retryable</code> or executed via <code>RetryTemplate</code> encounters an exception, Spring can automatically retry that method a configurable number of times.</li>
<li>The retry logic can be customized based on specific exceptions or broader conditions.</li>
<li>Spring supports various backoff policies, such as fixed delays, exponential backoff, and custom backoff strategies, to manage the interval between retry attempts.</li>
<li>After exhausting the maximum retry attempts, a <code>@Recover</code> method can be invoked to handle the failure gracefully.</li>
</ul>
<h3 id="Flow-of-Retry-Mechanism"><a href="#Flow-of-Retry-Mechanism" class="headerlink" title="Flow of Retry Mechanism:"></a>Flow of Retry Mechanism:</h3><ol>
<li><strong>Method Invocation</strong>: The retryable method is invoked.</li>
<li><strong>Exception Occurs</strong>: If an exception occurs, Spring checks if the method is retryable.</li>
<li><strong>Retry Policy</strong>: The retry policy determines whether to retry the method.</li>
<li><strong>Backoff Policy</strong>: If retries are allowed, the backoff policy defines the delay before the next retry.</li>
<li><strong>Retry Execution</strong>: The method is retried according to the defined policy.</li>
<li><strong>Recovery</strong>: If all retries fail, the <code>@Recover</code> method is invoked.</li>
</ol>
<hr>
<h2 id="3-Plain-Retry-Implementation-using-RetryTemplate"><a href="#3-Plain-Retry-Implementation-using-RetryTemplate" class="headerlink" title="3. Plain Retry Implementation using RetryTemplate"></a>3. Plain Retry Implementation using <code>RetryTemplate</code></h2><p><a name="3-plain-retry-implementation-using-retrytemplate"></a></p>
<p>The <code>RetryTemplate</code> is used to implement the retry mechanism programmatically. This approach provides fine-grained control over the retry logic and is ideal for complex scenarios.</p>
<h3 id="Step-by-Step-Guide"><a href="#Step-by-Step-Guide" class="headerlink" title="Step-by-Step Guide:"></a>Step-by-Step Guide:</h3><ol>
<li><p><strong>Add Dependencies</strong> in <code>pom.xml</code> (if using Maven):</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.retry<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-retry<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-aop<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Define <code>RetryTemplate</code> Bean</strong>:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RetryConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> RetryTemplate <span class="title function_">retryTemplate</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">RetryTemplate</span> <span class="variable">retryTemplate</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RetryTemplate</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Define retry policy (e.g., 3 attempts for any exception)</span></span><br><span class="line">        <span class="type">SimpleRetryPolicy</span> <span class="variable">retryPolicy</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleRetryPolicy</span>();</span><br><span class="line">        retryPolicy.setMaxAttempts(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Define backoff policy (e.g., 2 seconds between retries)</span></span><br><span class="line">        <span class="type">FixedBackOffPolicy</span> <span class="variable">backOffPolicy</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FixedBackOffPolicy</span>();</span><br><span class="line">        backOffPolicy.setBackOffPeriod(<span class="number">2000</span>); <span class="comment">// 2000 ms = 2 seconds</span></span><br><span class="line"></span><br><span class="line">        retryTemplate.setRetryPolicy(retryPolicy);</span><br><span class="line">        retryTemplate.setBackOffPolicy(backOffPolicy);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> retryTemplate;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Use <code>RetryTemplate</code> in Business Logic</strong>:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RetryTemplate retryTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">performTask</span><span class="params">()</span> &#123;</span><br><span class="line">        retryTemplate.execute(context -&gt; &#123;</span><br><span class="line">            <span class="comment">// Logic that might fail</span></span><br><span class="line">            System.out.println(<span class="string">&quot;Attempting task...&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">new</span> <span class="title class_">Random</span>().nextInt(<span class="number">10</span>) &lt; <span class="number">8</span>) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;Failed task&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;Task succeeded&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Main Application</strong>:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RetryApplication</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> SpringApplication.run(RetryApplication.class, args);</span><br><span class="line">        <span class="type">MyService</span> <span class="variable">service</span> <span class="operator">=</span> context.getBean(MyService.class);</span><br><span class="line">        service.performTask();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="Key-Points"><a href="#Key-Points" class="headerlink" title="Key Points:"></a>Key Points:</h3><ul>
<li><strong>RetryTemplate</strong>: Provides a flexible way to define retry policies and backoff strategies.</li>
<li><strong>SimpleRetryPolicy</strong>: Defines the maximum number of retry attempts.</li>
<li><strong>FixedBackOffPolicy</strong>: Sets a fixed delay between retry attempts.</li>
<li><strong>execute() Method</strong>: Executes the retry logic within a lambda expression.</li>
</ul>
<hr>
<h2 id="4-Annotation-Based-Retry-Implementation-using-Retryable"><a href="#4-Annotation-Based-Retry-Implementation-using-Retryable" class="headerlink" title="4. Annotation-Based Retry Implementation using @Retryable"></a>4. Annotation-Based Retry Implementation using <code>@Retryable</code></h2><p><a name="4-annotation-based-retry-implementation-using-retryable"></a></p>
<p>The annotation-based approach uses the <code>@Retryable</code> annotation to automatically retry methods without explicitly defining a <code>RetryTemplate</code>. This method is simpler and more concise, making it ideal for straightforward retry scenarios.</p>
<h3 id="Step-by-Step-Guide-1"><a href="#Step-by-Step-Guide-1" class="headerlink" title="Step-by-Step Guide:"></a>Step-by-Step Guide:</h3><ol>
<li><p><strong>Add Dependencies</strong> (same as in <code>RetryTemplate</code> approach).</p>
</li>
<li><p><strong>Enable Retry in Spring Boot Application</strong>:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableRetry</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RetryApplication</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(RetryApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Use <code>@Retryable</code> Annotation</strong>:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Retryable(</span></span><br><span class="line"><span class="meta">        value = &#123; RuntimeException.class &#125;, // Retry on specific exceptions</span></span><br><span class="line"><span class="meta">        maxAttempts = 3,                     // Retry up to 3 times</span></span><br><span class="line"><span class="meta">        backoff = @Backoff(delay = 2000)     // 2 seconds delay between retries</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">performTask</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Attempting task...&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">new</span> <span class="title class_">Random</span>().nextInt(<span class="number">10</span>) &lt; <span class="number">8</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;Task failed&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;Task succeeded&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Recover from Failure using <code>@Recover</code></strong>:<br>You can define a recovery method that will be called when all retry attempts are exhausted.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Retryable(</span></span><br><span class="line"><span class="meta">        value = &#123; RuntimeException.class &#125;,</span></span><br><span class="line"><span class="meta">        maxAttempts = 3,</span></span><br><span class="line"><span class="meta">        backoff = @Backoff(delay = 2000)</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">performTask</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Attempting task...&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">new</span> <span class="title class_">Random</span>().nextInt(<span class="number">10</span>) &lt; <span class="number">8</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;Task failed&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;Task succeeded&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Recover</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">recover</span><span class="params">(RuntimeException e)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Recovering from failure: &quot;</span> + e.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="Key-Points-1"><a href="#Key-Points-1" class="headerlink" title="Key Points:"></a>Key Points:</h3><ul>
<li><strong>@Retryable</strong>: Specifies the method to be retried, along with the retry conditions and backoff policy.</li>
<li><strong>@Recover</strong>: Defines a fallback method to handle failures after all retries are exhausted.</li>
<li><strong>@EnableRetry</strong>: Enables the retry mechanism in the Spring Boot application.</li>
</ul>
<hr>
<h2 id="5-Recovering-from-Failure-using-Recover"><a href="#5-Recovering-from-Failure-using-Recover" class="headerlink" title="5. Recovering from Failure using @Recover"></a>5. Recovering from Failure using <code>@Recover</code></h2><p><a name="5-recovering-from-failure-using-recover"></a></p>
<p>The <code>@Recover</code> annotation is used to define a fallback method that will be called when all retry attempts fail. This method allows you to handle the failure gracefully and provide a fallback response.</p>
<h3 id="Key-Points-2"><a href="#Key-Points-2" class="headerlink" title="Key Points:"></a>Key Points:</h3><ul>
<li>The method annotated with <code>@Recover</code> must have the same return type as the retryable method.</li>
<li>It must accept the exception type being handled as a parameter.</li>
</ul>
<p>Example:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Recover</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">recoverFromFailure</span><span class="params">(RuntimeException e)</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;Recovery logic for exception: &quot;</span> + e.getMessage());</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Fallback result&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>In the above example, when all retries fail, the <code>recoverFromFailure()</code> method will be called, and the fallback result will be returned.</p>
<h3 id="Advanced-Recovery"><a href="#Advanced-Recovery" class="headerlink" title="Advanced Recovery:"></a>Advanced Recovery:</h3><ul>
<li><strong>Multiple <code>@Recover</code> Methods</strong>: You can define multiple recovery methods for different exception types, allowing for more granular error handling.</li>
<li><strong>Parameter Matching</strong>: The recovery method’s parameters must match the retryable method’s parameters, except for the first parameter, which must be the exception type.</li>
</ul>
<hr>
<h2 id="6-Flowchart-Retry-Mechanism"><a href="#6-Flowchart-Retry-Mechanism" class="headerlink" title="6. Flowchart: Retry Mechanism"></a>6. Flowchart: Retry Mechanism</h2><p><a name="6-flowchart-retry-mechanism"></a></p>
<p>Below is a textual representation of the Spring Boot retry mechanism flowchart:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">+------------------------------------------+</span><br><span class="line">|      Start Application                   |</span><br><span class="line">+------------------------------------------+</span><br><span class="line">               |</span><br><span class="line">               V</span><br><span class="line">+------------------------------------------+</span><br><span class="line">|  Method Invoked (e.g., performTask)      |</span><br><span class="line">+------------------------------------------+</span><br><span class="line">               |</span><br><span class="line">               V</span><br><span class="line">+---------------------------------------------------+</span><br><span class="line">|  Is Retryable? (Check @Retryable or RT)           |</span><br><span class="line">+---------------------------------------------------+</span><br><span class="line">   Yes |                                     No |</span><br><span class="line">       V                                        V</span><br><span class="line">+-------------------------------------+  +-----------------------------+</span><br><span class="line">|  Try Method Execution               |  |  No retry, continue normal  |</span><br><span class="line">|                                     |  |  method execution           |</span><br><span class="line">+-------------------------------------+  +-----------------------------+</span><br><span class="line">               |</span><br><span class="line">               V</span><br><span class="line">+--------------------------------------------------+</span><br><span class="line">|  Method Execution Fails?                         |</span><br><span class="line">+--------------------------------------------------+</span><br><span class="line">   Yes |                                       No |</span><br><span class="line">       V                                          V</span><br><span class="line">+------------------------------------------+ +-----------------------------+</span><br><span class="line">|  Retry Policy Check (max attempts?)      | |  Method succeeds, continue  |</span><br><span class="line">+------------------------------------------+ +-----------------------------+</span><br><span class="line">   Yes |                                          No |</span><br><span class="line">       V                                             V</span><br><span class="line">+------------------------------------------+ +-----------------------------+</span><br><span class="line">|  Retry Backoff (delay before retry)      | |  Call @Recover method       |</span><br><span class="line">+------------------------------------------+ +-----------------------------+</span><br><span class="line">               |</span><br><span class="line">               V</span><br><span class="line">+------------------------------------------+</span><br><span class="line">|  Retry Method Execution                  |</span><br><span class="line">+------------------------------------------+</span><br><span class="line">               |</span><br><span class="line">               V</span><br><span class="line">+-------------------------------------------------------+</span><br><span class="line">|  Retry Limit Reached or Success?                      |</span><br><span class="line">+-------------------------------------------------------+</span><br><span class="line">  Retry Limit |                                 Success |</span><br><span class="line">              V                                         V</span><br><span class="line">+------------------------------------------+ +-----------------------------+</span><br><span class="line">|  Call @Recover method                    | |  Continue normal execution  |</span><br><span class="line">+------------------------------------------+ +-----------------------------+</span><br></pre></td></tr></table></figure>

<h3 id="Key-Points-3"><a href="#Key-Points-3" class="headerlink" title="Key Points:"></a>Key Points:</h3><ul>
<li><strong>Retryable Check</strong>: Determines if the method is eligible for retries.</li>
<li><strong>Retry Policy</strong>: Defines the number of retry attempts and conditions.</li>
<li><strong>Backoff Policy</strong>: Manages the delay between retry attempts.</li>
<li><strong>Recovery Method</strong>: Handles failures after all retries are exhausted.</li>
</ul>
<hr>
<h2 id="7-Multiple-Recover-Methods"><a href="#7-Multiple-Recover-Methods" class="headerlink" title="7. Multiple Recover Methods"></a>7. Multiple Recover Methods</h2><p><a name="7-multiple-recover-methods"></a></p>
<p>In Spring Retry, while it might seem like there is no explicit way to specify a “recover” method in the <code>@Retryable</code> annotation itself, you can still have multiple recover methods in the same class. Spring Retry allows you to define <strong>different recovery methods</strong> by relying on <strong>method signatures</strong>.</p>
<p>The framework will match the appropriate recovery method based on the <strong>parameters</strong> of the method, so each <code>@Recover</code> method corresponds to a specific exception type (or a list of exception types) that it’s designed to handle.</p>
<h3 id="Example-Multiple-Recover-Methods"><a href="#Example-Multiple-Recover-Methods" class="headerlink" title="Example: Multiple @Recover Methods"></a>Example: Multiple <code>@Recover</code> Methods</h3><p><a name="example-multiple-recover-methods"></a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ApiService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> RestTemplate restTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ApiService</span><span class="params">(RestTemplateBuilder restTemplateBuilder)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.restTemplate = restTemplateBuilder.build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Retryable method for HTTP client errors</span></span><br><span class="line">    <span class="meta">@Retryable(</span></span><br><span class="line"><span class="meta">        value = &#123; HttpClientErrorException.class &#125;,</span></span><br><span class="line"><span class="meta">        maxAttempts = 4,</span></span><br><span class="line"><span class="meta">        backoff = @Backoff(delay = 1000)</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">invokeClientApi</span><span class="params">(String url)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> restTemplate.getForObject(url, String.class);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Retryable method for HTTP server errors</span></span><br><span class="line">    <span class="meta">@Retryable(</span></span><br><span class="line"><span class="meta">        value = &#123; HttpServerErrorException.class &#125;,</span></span><br><span class="line"><span class="meta">        maxAttempts = 4,</span></span><br><span class="line"><span class="meta">        backoff = @Backoff(delay = 1000)</span></span><br><span class="line"><span class="meta">    )</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">invokeServerApi</span><span class="params">(String url)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> restTemplate.getForObject(url, String.class);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Recovery method for HTTP client errors</span></span><br><span class="line">    <span class="meta">@Recover</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">recoverClientError</span><span class="params">(HttpClientErrorException e, String url)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Client error fallback for URL: &quot;</span> + url;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Recovery method for HTTP server errors</span></span><br><span class="line">    <span class="meta">@Recover</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">recoverServerError</span><span class="params">(HttpServerErrorException e, String url)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Server error fallback for URL: &quot;</span> + url;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Key-Points-4"><a href="#Key-Points-4" class="headerlink" title="Key Points:"></a>Key Points:</h3><p><a name="key-points-1"></a></p>
<ul>
<li><strong>Different <code>@Recover</code> methods</strong> are defined based on the exception type (e.g., <code>HttpClientErrorException</code> vs. <code>HttpServerErrorException</code>).</li>
<li>The recovery method’s <strong>first parameter</strong> is the exception type that triggered the retry failure. This is how Spring determines which recover method to invoke.</li>
<li><strong>Additional parameters</strong> (like <code>url</code> in the example) must match the parameters of the corresponding retryable method.</li>
</ul>
<h3 id="How-It-Works"><a href="#How-It-Works" class="headerlink" title="How It Works:"></a>How It Works:</h3><p><a name="how-it-works"></a></p>
<ol>
<li>If the retryable method (<code>invokeClientApi</code> or <code>invokeServerApi</code>) fails after exhausting the retry attempts, Spring will look for a recovery method based on the exception type.</li>
<li>The recovery method (<code>recoverClientError</code> or <code>recoverServerError</code>) will be called depending on whether a <code>HttpClientErrorException</code> or a <code>HttpServerErrorException</code> occurred.</li>
</ol>
<h3 id="Summary"><a href="#Summary" class="headerlink" title="Summary:"></a>Summary:</h3><p><a name="summary"></a><br>A class can have <strong>multiple <code>@Recover</code> methods</strong>. Spring matches the correct recovery method based on the exception type and method signature, so you can create recover methods for different types of exceptions in the same class.</p>
<hr>
<h2 id="8-Conclusion"><a href="#8-Conclusion" class="headerlink" title="8. Conclusion"></a>8. Conclusion</h2><p><a name="8-conclusion"></a></p>
<p>Spring Boot’s retry mechanism provides a simple and powerful way to retry failed operations, with both <strong>programmatic</strong> (<code>RetryTemplate</code>) and <strong>declarative</strong> (<code>@Retryable</code>) support. Additionally, recovery methods allow handling failure gracefully after retry attempts are exhausted.</p>
<p>Whether you choose to use <code>RetryTemplate</code> or <code>@Retryable</code>, both approaches are robust solutions for retrying failed methods in Spring applications.</p>
<h3 id="Key-Takeaways"><a href="#Key-Takeaways" class="headerlink" title="Key Takeaways:"></a>Key Takeaways:</h3><ul>
<li><strong>RetryTemplate</strong>: Offers fine-grained control over retry logic.</li>
<li><strong>@Retryable</strong>: Provides a simpler, declarative approach to retries.</li>
<li><strong>@Recover</strong>: Enables graceful handling of failures after retries are exhausted.</li>
<li><strong>Multiple Recover Methods</strong>: Allows for granular error handling based on exception types.</li>
</ul>
<p>By leveraging Spring Retry, developers can build resilient applications that can handle transient faults effectively, ensuring higher availability and reliability.</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Spring-Boot/" rel="tag"><i class="fa fa-tag"></i> Spring Boot</a>
              <a href="/tags/WebFlux/" rel="tag"><i class="fa fa-tag"></i> WebFlux</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2024/10/23/How-to-Elegantly-Invoke-3rd-Party-APIs-in-Spring-Boot/" rel="prev" title="How to Elegantly Invoke 3rd Party APIs in Spring Boot">
                  <i class="fa fa-angle-left"></i> How to Elegantly Invoke 3rd Party APIs in Spring Boot
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2024/10/23/WebClient-and-RestTemplate-in-Spring-Boot/" rel="next" title="WebClient and RestTemplate in Spring Boot">
                  WebClient and RestTemplate in Spring Boot <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Dazhi Zhang</span>
  </div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  

  <script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"default","dark":"dark"},"js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.9.1/mermaid.min.js","integrity":"sha256-YbM1pG3wWnzhyYN49g5fPnen+2CKEFaZfopkkwSpNtY="}}</script>
  <script src="/js/third-party/tags/mermaid.js"></script>





  





</body>
</html>
