<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha256-5eIC48iZUHmSlSUz9XtjRyK2mzQkHScZY1WdMaoz74E=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"www.whereq.com","root":"/","images":"/images","scheme":"Gemini","darkmode":true,"version":"8.21.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="Core Reactive Types Creation Operators Transformation Operators Combination Operators Error Handling Operators Scheduling &amp; Threading Advanced Patterns  Core Reactive TypesMono - Single Result Co">
<meta property="og:type" content="article">
<meta property="og:title" content="WebFlux Deep Dive: Operators, Types, and Real-World Use Cases">
<meta property="og:url" content="https://www.whereq.com/2025/11/21/WebFlux-Deep-Dive-Operators-Types-and-Real-World-Use-Cases/index.html">
<meta property="og:site_name" content="WhereQ">
<meta property="og:description" content="Core Reactive Types Creation Operators Transformation Operators Combination Operators Error Handling Operators Scheduling &amp; Threading Advanced Patterns  Core Reactive TypesMono - Single Result Co">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2025-11-21T21:30:04.000Z">
<meta property="article:modified_time" content="2025-11-21T21:31:17.607Z">
<meta property="article:author" content="Dazhi Zhang">
<meta property="article:tag" content="WebFlux">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://www.whereq.com/2025/11/21/WebFlux-Deep-Dive-Operators-Types-and-Real-World-Use-Cases/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://www.whereq.com/2025/11/21/WebFlux-Deep-Dive-Operators-Types-and-Real-World-Use-Cases/","path":"2025/11/21/WebFlux-Deep-Dive-Operators-Types-and-Real-World-Use-Cases/","title":"WebFlux Deep Dive: Operators, Types, and Real-World Use Cases"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>WebFlux Deep Dive: Operators, Types, and Real-World Use Cases | WhereQ</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">WhereQ</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-articles"><a href="/articles/" rel="section"><i class="fa fa-file fa-fw"></i>Articles</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Core-Reactive-Types"><span class="nav-number">1.</span> <span class="nav-text">Core Reactive Types</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Mono-Single-Result-Container"><span class="nav-number">1.1.</span> <span class="nav-text">Mono - Single Result Container</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Flux-Multiple-Results-Stream"><span class="nav-number">1.2.</span> <span class="nav-text">Flux - Multiple Results Stream</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Transformation-Operators"><span class="nav-number">2.</span> <span class="nav-text">Transformation Operators</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#map-vs-flatMap-The-Critical-Difference"><span class="nav-number">2.1.</span> <span class="nav-text">map vs flatMap - The Critical Difference</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Advanced-Transformation-Operators"><span class="nav-number">2.2.</span> <span class="nav-text">Advanced Transformation Operators</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Combination-Operators"><span class="nav-number">3.</span> <span class="nav-text">Combination Operators</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Error-Handling-Operators"><span class="nav-number">4.</span> <span class="nav-text">Error Handling Operators</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Scheduling-Threading"><span class="nav-number">5.</span> <span class="nav-text">Scheduling &amp; Threading</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Advanced-Patterns-Real-World-Use-Cases"><span class="nav-number">6.</span> <span class="nav-text">Advanced Patterns &amp; Real-World Use Cases</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Pattern-1-API-Gateway-with-Rate-Limiting"><span class="nav-number">6.1.</span> <span class="nav-text">Pattern 1: API Gateway with Rate Limiting</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Pattern-2-Real-Time-Data-Pipeline"><span class="nav-number">6.2.</span> <span class="nav-text">Pattern 2: Real-Time Data Pipeline</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Pattern-3-Resilient-Service-Composition"><span class="nav-number">6.3.</span> <span class="nav-text">Pattern 3: Resilient Service Composition</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Performance-Best-Practices"><span class="nav-number">7.</span> <span class="nav-text">Performance Best Practices</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Dazhi Zhang</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">140</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">126</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">83</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://www.whereq.com/2025/11/21/WebFlux-Deep-Dive-Operators-Types-and-Real-World-Use-Cases/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Dazhi Zhang">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WhereQ">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="WebFlux Deep Dive: Operators, Types, and Real-World Use Cases | WhereQ">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          WebFlux Deep Dive: Operators, Types, and Real-World Use Cases
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2025-11-21 16:30:04 / Modified: 16:31:17" itemprop="dateCreated datePublished" datetime="2025-11-21T16:30:04-05:00">2025-11-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/WebFlux/" itemprop="url" rel="index"><span itemprop="name">WebFlux</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><ol>
<li><a href="#core-reactive-types">Core Reactive Types</a></li>
<li><a href="#creation-operators">Creation Operators</a></li>
<li><a href="#transformation-operators">Transformation Operators</a></li>
<li><a href="#combination-operators">Combination Operators</a></li>
<li><a href="#error-handling-operators">Error Handling Operators</a></li>
<li><a href="#scheduling--threading">Scheduling &amp; Threading</a></li>
<li><a href="#advanced-patterns">Advanced Patterns</a></li>
</ol>
<h2 id="Core-Reactive-Types"><a href="#Core-Reactive-Types" class="headerlink" title="Core Reactive Types"></a>Core Reactive Types</h2><h3 id="Mono-Single-Result-Container"><a href="#Mono-Single-Result-Container" class="headerlink" title="Mono - Single Result Container"></a>Mono - Single Result Container</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Mono represents a stream that emits 0 or 1 element</span></span><br><span class="line"><span class="comment"> * Perfect for: HTTP responses, database saves, single calculations</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MonoDeepDive</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Creation examples</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">monoCreation</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// Empty Mono</span></span><br><span class="line">        Mono&lt;String&gt; empty = Mono.empty();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// From value</span></span><br><span class="line">        Mono&lt;String&gt; staticValue = Mono.just(<span class="string">&quot;Hello World&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// From nullable</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">possiblyNull</span> <span class="operator">=</span> getFromCache();</span><br><span class="line">        Mono&lt;String&gt; nullable = Mono.justOrEmpty(possiblyNull);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// From supplier (lazy)</span></span><br><span class="line">        Mono&lt;String&gt; lazy = Mono.fromSupplier(() -&gt; expensiveOperation());</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// From callable</span></span><br><span class="line">        Mono&lt;String&gt; fromCallable = Mono.fromCallable(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">return</span> database.getUser(userId); <span class="comment">// Potentially blocking</span></span><br><span class="line">        &#125;);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// From future</span></span><br><span class="line">        CompletableFuture&lt;String&gt; future = asyncHttpCall();</span><br><span class="line">        Mono&lt;String&gt; fromFuture = Mono.fromFuture(future);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Real-world use case: User profile lookup</span></span><br><span class="line">    <span class="keyword">public</span> Mono&lt;UserProfile&gt; <span class="title function_">getUserProfile</span><span class="params">(String userId)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Mono.fromCallable(() -&gt; userRepository.findById(userId))</span><br><span class="line">                  .filter(Optional::isPresent)</span><br><span class="line">                  .map(Optional::get)</span><br><span class="line">                  .switchIfEmpty(Mono.error(<span class="keyword">new</span> <span class="title class_">UserNotFoundException</span>(userId)));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Flux-Multiple-Results-Stream"><a href="#Flux-Multiple-Results-Stream" class="headerlink" title="Flux - Multiple Results Stream"></a>Flux - Multiple Results Stream</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Flux represents a stream that emits 0 to N elements</span></span><br><span class="line"><span class="comment"> * Perfect for: Collections, real-time streams, paginated results</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FluxDeepDive</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Creation examples</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">fluxCreation</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// From values</span></span><br><span class="line">        Flux&lt;String&gt; fromValues = Flux.just(<span class="string">&quot;A&quot;</span>, <span class="string">&quot;B&quot;</span>, <span class="string">&quot;C&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// From array</span></span><br><span class="line">        Flux&lt;String&gt; fromArray = Flux.fromArray(<span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;A&quot;</span>, <span class="string">&quot;B&quot;</span>, <span class="string">&quot;C&quot;</span>&#125;);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// From iterable</span></span><br><span class="line">        Flux&lt;String&gt; fromList = Flux.fromIterable(Arrays.asList(<span class="string">&quot;A&quot;</span>, <span class="string">&quot;B&quot;</span>, <span class="string">&quot;C&quot;</span>));</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// Range</span></span><br><span class="line">        Flux&lt;Integer&gt; numbers = Flux.range(<span class="number">1</span>, <span class="number">10</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// Interval (real-time stream)</span></span><br><span class="line">        Flux&lt;Long&gt; ticker = Flux.interval(Duration.ofSeconds(<span class="number">1</span>));</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// Generate (stateful stream)</span></span><br><span class="line">        Flux&lt;Integer&gt; fibonacci = Flux.generate(</span><br><span class="line">            () -&gt; <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;<span class="number">0</span>, <span class="number">1</span>&#125;, <span class="comment">// initial state</span></span><br><span class="line">            (state, sink) -&gt; &#123;</span><br><span class="line">                sink.next(state[<span class="number">0</span>]);</span><br><span class="line">                <span class="type">int</span> <span class="variable">next</span> <span class="operator">=</span> state[<span class="number">0</span>] + state[<span class="number">1</span>];</span><br><span class="line">                state[<span class="number">0</span>] = state[<span class="number">1</span>];</span><br><span class="line">                state[<span class="number">1</span>] = next;</span><br><span class="line">                <span class="keyword">return</span> state;</span><br><span class="line">            &#125;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Real-world use case: Real-time stock prices</span></span><br><span class="line">    <span class="keyword">public</span> Flux&lt;StockPrice&gt; <span class="title function_">getStockPrices</span><span class="params">(String symbol)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Flux.interval(Duration.ofMillis(<span class="number">100</span>))</span><br><span class="line">                  .flatMap(tick -&gt; </span><br><span class="line">                      Mono.fromCallable(() -&gt; stockService.getCurrentPrice(symbol))</span><br><span class="line">                          .subscribeOn(Schedulers.boundedElastic())</span><br><span class="line">                  )</span><br><span class="line">                  .take(<span class="number">100</span>); <span class="comment">// Only take 100 price updates</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Transformation-Operators"><a href="#Transformation-Operators" class="headerlink" title="Transformation Operators"></a>Transformation Operators</h2><h3 id="map-vs-flatMap-The-Critical-Difference"><a href="#map-vs-flatMap-The-Critical-Difference" class="headerlink" title="map vs flatMap - The Critical Difference"></a>map vs flatMap - The Critical Difference</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TransformationOperators</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * map: Synchronous 1:1 transformation</span></span><br><span class="line"><span class="comment">     * Use when: Transformation is fast, non-blocking, CPU-bound</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">mapOperator</span><span class="params">()</span> &#123;</span><br><span class="line">        Flux&lt;String&gt; names = Flux.just(<span class="string">&quot;john&quot;</span>, <span class="string">&quot;jane&quot;</span>, <span class="string">&quot;bob&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// Synchronous transformation - stays in same thread</span></span><br><span class="line">        Flux&lt;String&gt; capitalized = names.map(name -&gt; name.toUpperCase());</span><br><span class="line">        <span class="comment">// Output: JOHN, JANE, BOB</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// Real-world: Data enrichment (fast)</span></span><br><span class="line">        Flux&lt;User&gt; users = getUserIds()</span><br><span class="line">            .map(id -&gt; <span class="keyword">new</span> <span class="title class_">User</span>(id, <span class="string">&quot;user-&quot;</span> + id));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * flatMap: Asynchronous 1:N transformation</span></span><br><span class="line"><span class="comment">     * Use when: Need to call async APIs, database, external services</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">flatMapOperator</span><span class="params">()</span> &#123;</span><br><span class="line">        Flux&lt;String&gt; userIds = Flux.just(<span class="string">&quot;user1&quot;</span>, <span class="string">&quot;user2&quot;</span>, <span class="string">&quot;user3&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// Asynchronous transformation - can change threads</span></span><br><span class="line">        Flux&lt;User&gt; users = userIds.flatMap(id -&gt; </span><br><span class="line">            userRepository.findByIdAsync(id) <span class="comment">// Returns Mono&lt;User&gt;</span></span><br><span class="line">        );</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// Real-world: Fetch user details from multiple services</span></span><br><span class="line">        Flux&lt;Order&gt; orders = getOrderIds()</span><br><span class="line">            .flatMap(orderId -&gt; </span><br><span class="line">                orderService.getOrderAsync(orderId)</span><br><span class="line">                    .onErrorResume(e -&gt; Mono.empty()) <span class="comment">// Skip failed orders</span></span><br><span class="line">            );</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * flatMapMany: Convert Mono to Flux</span></span><br><span class="line"><span class="comment">     * Use when: You have Mono that emits multiple items</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">flatMapManyOperator</span><span class="params">()</span> &#123;</span><br><span class="line">        Mono&lt;String&gt; csvData = readCsvFile();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// Convert Mono&lt;String&gt; to Flux&lt;String[]&gt;</span></span><br><span class="line">        Flux&lt;String[]&gt; rows = csvData.flatMapMany(content -&gt; </span><br><span class="line">            Flux.fromArray(content.split(<span class="string">&quot;\n&quot;</span>))</span><br><span class="line">                .map(line -&gt; line.split(<span class="string">&quot;,&quot;</span>))</span><br><span class="line">        );</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// Real-world: Get user and their recent activities</span></span><br><span class="line">        Mono&lt;User&gt; user = getUserProfile(userId);</span><br><span class="line">        Flux&lt;Activity&gt; activities = user.flatMapMany(u -&gt; </span><br><span class="line">            activityService.getRecentActivities(u.getId())</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Advanced-Transformation-Operators"><a href="#Advanced-Transformation-Operators" class="headerlink" title="Advanced Transformation Operators"></a>Advanced Transformation Operators</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AdvancedTransformations</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * concatMap vs flatMap - Ordering guarantee</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">orderingGuarantees</span><span class="params">()</span> &#123;</span><br><span class="line">        Flux&lt;String&gt; ids = Flux.just(<span class="string">&quot;1&quot;</span>, <span class="string">&quot;2&quot;</span>, <span class="string">&quot;3&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// flatMap - no ordering guarantee (faster)</span></span><br><span class="line">        Flux&lt;String&gt; unordered = ids.flatMap(id -&gt; </span><br><span class="line">            asyncOperation(id).delayElement(Duration.ofMillis(randomDelay()))</span><br><span class="line">        );</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// concatMap - preserves order (slower but ordered)</span></span><br><span class="line">        Flux&lt;String&gt; ordered = ids.concatMap(id -&gt; </span><br><span class="line">            asyncOperation(id).delayElement(Duration.ofMillis(randomDelay()))</span><br><span class="line">        );</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// Real-world: Processing messages with ordering requirement</span></span><br><span class="line">        Flux&lt;Message&gt; kafkaMessages = kafkaReceiver.receive();</span><br><span class="line">        kafkaMessages</span><br><span class="line">            .concatMap(msg -&gt; processMessage(msg)) <span class="comment">// Maintain message order</span></span><br><span class="line">            .subscribe();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * switchMap - Cancel previous emissions</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">switchMapOperator</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// Real-world: Search-as-you-type</span></span><br><span class="line">        Flux&lt;String&gt; searchTerms = keyPressEvents();</span><br><span class="line">        </span><br><span class="line">        Flux&lt;SearchResults&gt; results = searchTerms</span><br><span class="line">            .debounce(Duration.ofMillis(<span class="number">300</span>)) <span class="comment">// Wait for typing to stop</span></span><br><span class="line">            .switchMap(term -&gt; </span><br><span class="line">                searchService.search(term) <span class="comment">// Cancel previous search if new term arrives</span></span><br><span class="line">                    .timeout(Duration.ofSeconds(<span class="number">5</span>))</span><br><span class="line">            );</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * groupBy - Group elements by key</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">groupByOperator</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// Real-world: Group orders by customer</span></span><br><span class="line">        Flux&lt;Order&gt; orders = orderStream();</span><br><span class="line">        </span><br><span class="line">        Flux&lt;GroupedFlux&lt;String, Order&gt;&gt; byCustomer = orders</span><br><span class="line">            .groupBy(Order::getCustomerId);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// Process each customer&#x27;s orders separately</span></span><br><span class="line">        byCustomer.flatMap(group -&gt; </span><br><span class="line">            group</span><br><span class="line">                .window(Duration.ofMinutes(<span class="number">5</span>)) <span class="comment">// Window by time</span></span><br><span class="line">                .flatMap(window -&gt; calculateCustomerStats(window))</span><br><span class="line">        ).subscribe();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Combination-Operators"><a href="#Combination-Operators" class="headerlink" title="Combination Operators"></a>Combination Operators</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CombinationOperators</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * zip - Combine multiple publishers</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">zipOperator</span><span class="params">()</span> &#123;</span><br><span class="line">        Mono&lt;User&gt; user = getUser(userId);</span><br><span class="line">        Mono&lt;Profile&gt; profile = getProfile(userId);</span><br><span class="line">        Mono&lt;Preferences&gt; prefs = getPreferences(userId);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// Wait for all to complete, then combine</span></span><br><span class="line">        Mono&lt;UserDashboard&gt; dashboard = Mono.zip(user, profile, prefs)</span><br><span class="line">            .map(tuple -&gt; &#123;</span><br><span class="line">                <span class="type">User</span> <span class="variable">u</span> <span class="operator">=</span> tuple.getT1();</span><br><span class="line">                <span class="type">Profile</span> <span class="variable">p</span> <span class="operator">=</span> tuple.getT2();</span><br><span class="line">                <span class="type">Preferences</span> <span class="variable">pref</span> <span class="operator">=</span> tuple.getT3();</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">UserDashboard</span>(u, p, pref);</span><br><span class="line">            &#125;);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// Real-world: Aggregate data from multiple microservices</span></span><br><span class="line">        Mono&lt;OrderDetails&gt; orderDetails = Mono.zip(</span><br><span class="line">            orderService.getOrder(orderId),</span><br><span class="line">            paymentService.getPayment(orderId),</span><br><span class="line">            shippingService.getTracking(orderId)</span><br><span class="line">        ).map(t -&gt; OrderDetails.aggregate(t.getT1(), t.getT2(), t.getT3()));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * merge vs concat - Parallel vs sequential combination</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">mergeVsConcat</span><span class="params">()</span> &#123;</span><br><span class="line">        Flux&lt;String&gt; stream1 = Flux.just(<span class="string">&quot;A&quot;</span>, <span class="string">&quot;B&quot;</span>, <span class="string">&quot;C&quot;</span>).delayElements(Duration.ofMillis(<span class="number">100</span>));</span><br><span class="line">        Flux&lt;String&gt; stream2 = Flux.just(<span class="string">&quot;1&quot;</span>, <span class="string">&quot;2&quot;</span>, <span class="string">&quot;3&quot;</span>).delayElements(Duration.ofMillis(<span class="number">50</span>));</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// merge - interleaves as they arrive (faster)</span></span><br><span class="line">        Flux&lt;String&gt; merged = Flux.merge(stream1, stream2);</span><br><span class="line">        <span class="comment">// Possible output: 1, A, 2, B, 3, C</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// concat - waits for first to complete (ordered)</span></span><br><span class="line">        Flux&lt;String&gt; concatenated = Flux.concat(stream1, stream2);</span><br><span class="line">        <span class="comment">// Guaranteed output: A, B, C, 1, 2, 3</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * combineLatest - Combine latest from multiple streams</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">combineLatest</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// Real-world: Real-time dashboard with multiple data sources</span></span><br><span class="line">        Flux&lt;Double&gt; stockPrice = stockPriceStream();</span><br><span class="line">        Flux&lt;Double&gt; exchangeRate = exchangeRateStream();</span><br><span class="line">        Flux&lt;News&gt; newsFeed = newsStream();</span><br><span class="line">        </span><br><span class="line">        Flux&lt;Dashboard&gt; dashboard = Flux.combineLatest(</span><br><span class="line">            Arrays::asList,</span><br><span class="line">            stockPrice, exchangeRate, newsFeed</span><br><span class="line">        ).map(data -&gt; &#123;</span><br><span class="line">            <span class="type">Double</span> <span class="variable">price</span> <span class="operator">=</span> (Double) data[<span class="number">0</span>];</span><br><span class="line">            <span class="type">Double</span> <span class="variable">rate</span> <span class="operator">=</span> (Double) data[<span class="number">1</span>];</span><br><span class="line">            <span class="type">News</span> <span class="variable">news</span> <span class="operator">=</span> (News) data[<span class="number">2</span>];</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Dashboard</span>(price, rate, news);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Error-Handling-Operators"><a href="#Error-Handling-Operators" class="headerlink" title="Error Handling Operators"></a>Error Handling Operators</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ErrorHandlingOperators</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Comprehensive error handling strategies</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">errorHandling</span><span class="params">()</span> &#123;</span><br><span class="line">        Flux&lt;String&gt; dataStream = getDataStream();</span><br><span class="line">        </span><br><span class="line">        dataStream</span><br><span class="line">            <span class="comment">// 1. Timeout handling</span></span><br><span class="line">            .timeout(Duration.ofSeconds(<span class="number">30</span>))</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 2. Retry with backoff</span></span><br><span class="line">            .retryWhen(Retry.backoff(<span class="number">3</span>, Duration.ofSeconds(<span class="number">1</span>))</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 3. Fallback values</span></span><br><span class="line">            .onErrorReturn(<span class="string">&quot;fallback-value&quot;</span>)</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 4. Fallback method</span></span><br><span class="line">            .onErrorResume(error -&gt; &#123;</span><br><span class="line">                <span class="keyword">if</span> (error <span class="keyword">instanceof</span> TimeoutException) &#123;</span><br><span class="line">                    <span class="keyword">return</span> getCachedData();</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (error <span class="keyword">instanceof</span> DatabaseException) &#123;</span><br><span class="line">                    <span class="keyword">return</span> getBackupData();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> Flux.error(error);</span><br><span class="line">            &#125;)</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 5. Log and continue</span></span><br><span class="line">            .doOnError(error -&gt; </span><br><span class="line">                log.error(<span class="string">&quot;Stream processing failed&quot;</span>, error)</span><br><span class="line">            )</span><br><span class="line">            </span><br><span class="line">            .subscribe();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Circuit breaker pattern</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">circuitBreaker</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">CircuitBreaker</span> <span class="variable">circuitBreaker</span> <span class="operator">=</span> CircuitBreaker.ofDefaults(<span class="string">&quot;backendService&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        Flux&lt;String&gt; resilientStream = Flux.interval(Duration.ofSeconds(<span class="number">1</span>))</span><br><span class="line">            .flatMap(tick -&gt; </span><br><span class="line">                Mono.fromCallable(() -&gt; externalService.call())</span><br><span class="line">                    .transformDeferred(CircuitBreakerOperator.of(circuitBreaker))</span><br><span class="line">                    .onErrorResume(e -&gt; Mono.just(<span class="string">&quot;fallback&quot;</span>))</span><br><span class="line">            );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Scheduling-Threading"><a href="#Scheduling-Threading" class="headerlink" title="Scheduling &amp; Threading"></a>Scheduling &amp; Threading</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SchedulingDeepDive</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Proper threading model for different operations</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">schedulingOperators</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// CPU-intensive work</span></span><br><span class="line">        Flux&lt;Integer&gt; cpuIntensive = Flux.range(<span class="number">1</span>, <span class="number">1000</span>)</span><br><span class="line">            .parallel() <span class="comment">// Process in parallel</span></span><br><span class="line">            .runOn(Schedulers.parallel())</span><br><span class="line">            .map(i -&gt; expensiveComputation(i))</span><br><span class="line">            .sequential();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// I/O intensive work</span></span><br><span class="line">        Flux&lt;String&gt; ioIntensive = Flux.just(<span class="string">&quot;id1&quot;</span>, <span class="string">&quot;id2&quot;</span>, <span class="string">&quot;id3&quot;</span>)</span><br><span class="line">            .flatMap(id -&gt; </span><br><span class="line">                Mono.fromCallable(() -&gt; database.query(id))</span><br><span class="line">                    .subscribeOn(Schedulers.boundedElastic()) <span class="comment">// Offload blocking I/O</span></span><br><span class="line">            );</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// Real-time processing with different schedulers</span></span><br><span class="line">        Flux.interval(Duration.ofMillis(<span class="number">10</span>))</span><br><span class="line">            .publishOn(Schedulers.single()) <span class="comment">// Dedicated thread for downstream</span></span><br><span class="line">            .map(tick -&gt; transformData(tick))</span><br><span class="line">            .publishOn(Schedulers.boundedElastic()) <span class="comment">// Switch threads for I/O</span></span><br><span class="line">            .flatMap(data -&gt; saveToDatabase(data))</span><br><span class="line">            .subscribeOn(Schedulers.parallel()) <span class="comment">// Where subscription happens</span></span><br><span class="line">            .subscribe();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Scheduler types and when to use them</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">schedulerTypes</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// Schedulers.immediate() - Current thread</span></span><br><span class="line">        <span class="comment">// Schedulers.single() - Single dedicated thread</span></span><br><span class="line">        <span class="comment">// Schedulers.parallel() - Fixed pool for CPU work</span></span><br><span class="line">        <span class="comment">// Schedulers.boundedElastic() - For blocking I/O (preferred over elastic)</span></span><br><span class="line">        <span class="comment">// Schedulers.elastic() - Legacy, unlimited threads (avoid)</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Advanced-Patterns-Real-World-Use-Cases"><a href="#Advanced-Patterns-Real-World-Use-Cases" class="headerlink" title="Advanced Patterns &amp; Real-World Use Cases"></a>Advanced Patterns &amp; Real-World Use Cases</h2><h3 id="Pattern-1-API-Gateway-with-Rate-Limiting"><a href="#Pattern-1-API-Gateway-with-Rate-Limiting" class="headerlink" title="Pattern 1: API Gateway with Rate Limiting"></a>Pattern 1: API Gateway with Rate Limiting</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ApiGatewayService</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> Flux&lt;ApiResponse&gt; <span class="title function_">handleConcurrentRequests</span><span class="params">(Flux&lt;ApiRequest&gt; requests)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> requests</span><br><span class="line">            .window(Duration.ofSeconds(<span class="number">1</span>)) <span class="comment">// Window by time</span></span><br><span class="line">            .flatMap(window -&gt; </span><br><span class="line">                window</span><br><span class="line">                    .limitRate(<span class="number">100</span>) <span class="comment">// Limit to 100 requests per second</span></span><br><span class="line">                    .flatMap(<span class="built_in">this</span>::processRequest, <span class="number">10</span>) <span class="comment">// Max 10 concurrent</span></span><br><span class="line">            )</span><br><span class="line">            .onErrorResume(error -&gt; </span><br><span class="line">                Flux.just(ApiResponse.error(<span class="string">&quot;Service unavailable&quot;</span>))</span><br><span class="line">            );</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> Mono&lt;ApiResponse&gt; <span class="title function_">processRequest</span><span class="params">(ApiRequest request)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Mono.zip(</span><br><span class="line">            userService.validateToken(request.getToken()),</span><br><span class="line">            rateLimitService.checkLimit(request.getUserId())</span><br><span class="line">        )</span><br><span class="line">        .flatMap(tuple -&gt; routingService.routeRequest(request))</span><br><span class="line">        .timeout(Duration.ofSeconds(<span class="number">5</span>))</span><br><span class="line">        .retryWhen(Retry.fixedDelay(<span class="number">2</span>, Duration.ofMillis(<span class="number">100</span>)));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Pattern-2-Real-Time-Data-Pipeline"><a href="#Pattern-2-Real-Time-Data-Pipeline" class="headerlink" title="Pattern 2: Real-Time Data Pipeline"></a>Pattern 2: Real-Time Data Pipeline</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DataPipeline</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> Flux&lt;ProcessedData&gt; <span class="title function_">createPipeline</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> kafkaSource.stream()</span><br><span class="line">            .groupBy(message -&gt; message.getPartitionKey()) <span class="comment">// Maintain ordering per key</span></span><br><span class="line">            .flatMap(partitionStream -&gt; </span><br><span class="line">                partitionStream</span><br><span class="line">                    .window(Duration.ofSeconds(<span class="number">5</span>)) <span class="comment">// Batch processing</span></span><br><span class="line">                    .flatMap(<span class="built_in">this</span>::processBatch)</span><br><span class="line">                    .flatMap(<span class="built_in">this</span>::enrichWithExternalData)</span><br><span class="line">                    .flatMap(<span class="built_in">this</span>::validateAndTransform)</span><br><span class="line">                    .buffer(<span class="number">100</span>) <span class="comment">// Buffer for bulk insert</span></span><br><span class="line">                    .flatMap(<span class="built_in">this</span>::bulkInsertToDatabase)</span><br><span class="line">            , <span class="number">32</span>) <span class="comment">// Process 32 partitions concurrently</span></span><br><span class="line">            .metrics() <span class="comment">// Monitor performance</span></span><br><span class="line">            .doOnNext(metrics::recordProcessingTime);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> Mono&lt;ProcessedData&gt; <span class="title function_">processBatch</span><span class="params">(Flux&lt;Message&gt; batch)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> batch</span><br><span class="line">            .collectList()</span><br><span class="line">            .flatMap(list -&gt; </span><br><span class="line">                Mono.fromCallable(() -&gt; sparkService.processBatch(list))</span><br><span class="line">                    .subscribeOn(Schedulers.boundedElastic())</span><br><span class="line">            );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Pattern-3-Resilient-Service-Composition"><a href="#Pattern-3-Resilient-Service-Composition" class="headerlink" title="Pattern 3: Resilient Service Composition"></a>Pattern 3: Resilient Service Composition</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ResilientServiceComposition</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> Mono&lt;OrderResult&gt; <span class="title function_">processOrder</span><span class="params">(Order order)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> validateOrder(order)</span><br><span class="line">            .flatMap(validated -&gt; </span><br><span class="line">                Mono.zip(</span><br><span class="line">                    reserveInventory(validated).onErrorReturn(InventoryReservation.failed()),</span><br><span class="line">                    processPayment(validated).onErrorReturn(PaymentResult.failed()),</span><br><span class="line">                    updateShipping(validated).onErrorReturn(ShippingUpdate.failed())</span><br><span class="line">                )</span><br><span class="line">            )</span><br><span class="line">            .map(tuple -&gt; &#123;</span><br><span class="line">                <span class="comment">// Compose final result from partial successes/failures</span></span><br><span class="line">                <span class="keyword">return</span> OrderResult.fromComponents(</span><br><span class="line">                    tuple.getT1(), </span><br><span class="line">                    tuple.getT2(), </span><br><span class="line">                    tuple.getT3()</span><br><span class="line">                );</span><br><span class="line">            &#125;)</span><br><span class="line">            .timeout(Duration.ofSeconds(<span class="number">30</span>))</span><br><span class="line">            .retryWhen(Retry.backoff(<span class="number">3</span>, Duration.ofSeconds(<span class="number">1</span>)));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Performance-Best-Practices"><a href="#Performance-Best-Practices" class="headerlink" title="Performance Best Practices"></a>Performance Best Practices</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PerformanceBestPractices</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 1. Avoid blocking in reactive chains</span></span><br><span class="line">    <span class="keyword">public</span> Flux&lt;String&gt; <span class="title function_">badExample</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Flux.range(<span class="number">1</span>, <span class="number">100</span>)</span><br><span class="line">            .map(i -&gt; &#123;</span><br><span class="line">                <span class="keyword">return</span> blockingDatabaseCall(i); <span class="comment">//  BLOCKING!</span></span><br><span class="line">            &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> Flux&lt;String&gt; <span class="title function_">goodExample</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Flux.range(<span class="number">1</span>, <span class="number">100</span>)</span><br><span class="line">            .flatMap(i -&gt; </span><br><span class="line">                Mono.fromCallable(() -&gt; blockingDatabaseCall(i))</span><br><span class="line">                    .subscribeOn(Schedulers.boundedElastic()) <span class="comment">//  Correct</span></span><br><span class="line">            );</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 2. Use backpressure properly</span></span><br><span class="line">    <span class="keyword">public</span> Flux&lt;Data&gt; <span class="title function_">handleBackpressure</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> fastProducer()</span><br><span class="line">            .onBackpressureBuffer(<span class="number">1000</span>) <span class="comment">// Buffer up to 1000 elements</span></span><br><span class="line">            .onBackpressureDrop(dropped -&gt; log.warn(<span class="string">&quot;Dropped: &#123;&#125;&quot;</span>, dropped))</span><br><span class="line">            .concatMap(<span class="built_in">this</span>::slowConsumer, <span class="number">5</span>); <span class="comment">// Control concurrency</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 3. Monitor and tune</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">monitoring</span><span class="params">()</span> &#123;</span><br><span class="line">        Flux.range(<span class="number">1</span>, <span class="number">1000</span>)</span><br><span class="line">            .name(<span class="string">&quot;processing.pipeline&quot;</span>)</span><br><span class="line">            .tag(<span class="string">&quot;type&quot;</span>, <span class="string">&quot;batch&quot;</span>)</span><br><span class="line">            .metrics()</span><br><span class="line">            .doOnNext(item -&gt; </span><br><span class="line">                Metrics.counter(<span class="string">&quot;items.processed&quot;</span>).increment()</span><br><span class="line">            )</span><br><span class="line">            .subscribe();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/WebFlux/" rel="tag"><i class="fa fa-tag"></i> WebFlux</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2025/10/22/Hexo-and-NexT-Theme/" rel="prev" title="Hexo and NexT Theme">
                  <i class="fa fa-angle-left"></i> Hexo and NexT Theme
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2025/12/01/Full-Fine-Tuning-vs-LoRA/" rel="next" title="Full Fine-Tuning vs LoRA">
                  Full Fine-Tuning vs LoRA <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Dazhi Zhang</span>
  </div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  

  <script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"default","dark":"dark"},"js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.9.1/mermaid.min.js","integrity":"sha256-YbM1pG3wWnzhyYN49g5fPnen+2CKEFaZfopkkwSpNtY="}}</script>
  <script src="/js/third-party/tags/mermaid.js"></script>





  





</body>
</html>
