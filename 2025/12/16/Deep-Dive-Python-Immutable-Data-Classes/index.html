<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha256-5eIC48iZUHmSlSUz9XtjRyK2mzQkHScZY1WdMaoz74E=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"www.whereq.com","root":"/","images":"/images","scheme":"Gemini","darkmode":true,"version":"8.21.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="üìã Table of Contents Introduction &amp; Fundamentals How It Works Internally Practical Benefits &amp; Use Cases The Shallow Freezing Caveat Working with Immutable Objects Advanced Patterns &amp; Alter">
<meta property="og:type" content="article">
<meta property="og:title" content="Deep Dive: Python Immutable Data Classes">
<meta property="og:url" content="https://www.whereq.com/2025/12/16/Deep-Dive-Python-Immutable-Data-Classes/index.html">
<meta property="og:site_name" content="WhereQ">
<meta property="og:description" content="üìã Table of Contents Introduction &amp; Fundamentals How It Works Internally Practical Benefits &amp; Use Cases The Shallow Freezing Caveat Working with Immutable Objects Advanced Patterns &amp; Alter">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2025-12-17T03:44:42.000Z">
<meta property="article:modified_time" content="2025-12-17T03:55:27.566Z">
<meta property="article:author" content="Dazhi Zhang">
<meta property="article:tag" content="Python">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://www.whereq.com/2025/12/16/Deep-Dive-Python-Immutable-Data-Classes/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://www.whereq.com/2025/12/16/Deep-Dive-Python-Immutable-Data-Classes/","path":"2025/12/16/Deep-Dive-Python-Immutable-Data-Classes/","title":"Deep Dive: Python Immutable Data Classes"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Deep Dive: Python Immutable Data Classes | WhereQ</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">WhereQ</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-articles"><a href="/articles/" rel="section"><i class="fa fa-file fa-fw"></i>Articles</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%F0%9F%93%8B-Table-of-Contents"><span class="nav-number">1.</span> <span class="nav-text">üìã Table of Contents</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Introduction-Fundamentals"><span class="nav-number">2.</span> <span class="nav-text">Introduction &amp; Fundamentals</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#What-is-dataclass-frozen-True"><span class="nav-number">2.1.</span> <span class="nav-text">What is @dataclass(frozen&#x3D;True)?</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Core-Concept-Immutability-vs-Mutability"><span class="nav-number">2.2.</span> <span class="nav-text">Core Concept: Immutability vs. Mutability</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#How-It-Works-Internally"><span class="nav-number">3.</span> <span class="nav-text">How It Works Internally</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Automatic-Method-Generation"><span class="nav-number">3.1.</span> <span class="nav-text">Automatic Method Generation</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#The-Magic-of-hash"><span class="nav-number">3.2.</span> <span class="nav-text">The Magic of __hash__</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Implementation-Example"><span class="nav-number">3.3.</span> <span class="nav-text">Implementation Example</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Practical-Benefits-Use-Cases"><span class="nav-number">4.</span> <span class="nav-text">Practical Benefits &amp; Use Cases</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-Thread-Safety-Concurrency"><span class="nav-number">4.1.</span> <span class="nav-text">1. Thread Safety &amp; Concurrency</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-Dictionary-Keys-Set-Elements"><span class="nav-number">4.2.</span> <span class="nav-text">2. Dictionary Keys &amp; Set Elements</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-Functional-Programming-Patterns"><span class="nav-number">4.3.</span> <span class="nav-text">3. Functional Programming Patterns</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-Configuration-Objects"><span class="nav-number">4.4.</span> <span class="nav-text">4. Configuration Objects</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#The-Shallow-Freezing-Caveat"><span class="nav-number">5.</span> <span class="nav-text">The Shallow Freezing Caveat</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Understanding-the-Limitation"><span class="nav-number">5.1.</span> <span class="nav-text">Understanding the Limitation</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Solutions-for-Deep-Immutability"><span class="nav-number">5.2.</span> <span class="nav-text">Solutions for Deep Immutability</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Working-with-Immutable-Objects"><span class="nav-number">6.</span> <span class="nav-text">Working with Immutable Objects</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#The-replace-Function-Pattern"><span class="nav-number">6.1.</span> <span class="nav-text">The replace() Function Pattern</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Bulk-Updates-with-Dictionary-Unpacking"><span class="nav-number">6.2.</span> <span class="nav-text">Bulk Updates with Dictionary Unpacking</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Versioned-Data-with-Inheritance"><span class="nav-number">6.3.</span> <span class="nav-text">Versioned Data with Inheritance</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Advanced-Patterns-Alternatives"><span class="nav-number">7.</span> <span class="nav-text">Advanced Patterns &amp; Alternatives</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Pattern-1-Builder-Pattern-for-Complex-Objects"><span class="nav-number">7.1.</span> <span class="nav-text">Pattern 1: Builder Pattern for Complex Objects</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Pattern-2-Registry-Pattern-with-Frozen-Classes"><span class="nav-number">7.2.</span> <span class="nav-text">Pattern 2: Registry Pattern with Frozen Classes</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Alternative-1-collections-namedtuple"><span class="nav-number">7.3.</span> <span class="nav-text">Alternative 1: collections.namedtuple</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Alternative-2-attrs-Library"><span class="nav-number">7.4.</span> <span class="nav-text">Alternative 2: attrs Library</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Performance-Considerations"><span class="nav-number">8.</span> <span class="nav-text">Performance Considerations</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Memory-and-Speed-Implications"><span class="nav-number">8.1.</span> <span class="nav-text">Memory and Speed Implications</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#When-Performance-Matters"><span class="nav-number">8.2.</span> <span class="nav-text">When Performance Matters</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Best-Practices"><span class="nav-number">9.</span> <span class="nav-text">Best Practices</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-Default-to-Frozen"><span class="nav-number">9.1.</span> <span class="nav-text">1. Default to Frozen</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-Use-Immutable-Field-Types"><span class="nav-number">9.2.</span> <span class="nav-text">2. Use Immutable Field Types</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-Implement-Domain-Logic-as-Methods"><span class="nav-number">9.3.</span> <span class="nav-text">3. Implement Domain Logic as Methods</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-Combine-with-kw-only-for-Clarity"><span class="nav-number">9.4.</span> <span class="nav-text">4. Combine with kw_only for Clarity</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-Document-Frozen-Assumptions"><span class="nav-number">9.5.</span> <span class="nav-text">5. Document Frozen Assumptions</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Common-Pitfalls-and-Solutions"><span class="nav-number">10.</span> <span class="nav-text">Common Pitfalls and Solutions</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Pitfall-1-Inadvertent-Mutation-of-Nested-Objects"><span class="nav-number">10.1.</span> <span class="nav-text">Pitfall 1: Inadvertent Mutation of Nested Objects</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Pitfall-2-Circular-References"><span class="nav-number">10.2.</span> <span class="nav-text">Pitfall 2: Circular References</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Pitfall-3-Serialization-Issues"><span class="nav-number">10.3.</span> <span class="nav-text">Pitfall 3: Serialization Issues</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Conclusion"><span class="nav-number">11.</span> <span class="nav-text">Conclusion</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Dazhi Zhang</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">149</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">132</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">87</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://www.whereq.com/2025/12/16/Deep-Dive-Python-Immutable-Data-Classes/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Dazhi Zhang">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WhereQ">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Deep Dive: Python Immutable Data Classes | WhereQ">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Deep Dive: Python Immutable Data Classes
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2025-12-16 22:44:42 / Modified: 22:55:27" itemprop="dateCreated datePublished" datetime="2025-12-16T22:44:42-05:00">2025-12-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h2 id="üìã-Table-of-Contents"><a href="#üìã-Table-of-Contents" class="headerlink" title="üìã Table of Contents"></a>üìã Table of Contents</h2><ol>
<li><a href="#introduction--fundamentals">Introduction &amp; Fundamentals</a></li>
<li><a href="#how-it-works-internally">How It Works Internally</a></li>
<li><a href="#practical-benefits--use-cases">Practical Benefits &amp; Use Cases</a></li>
<li><a href="#the-shallow-freezing-caveat">The Shallow Freezing Caveat</a></li>
<li><a href="#working-with-immutable-objects">Working with Immutable Objects</a></li>
<li><a href="#advanced-patterns--alternatives">Advanced Patterns &amp; Alternatives</a></li>
<li><a href="#performance-considerations">Performance Considerations</a></li>
<li><a href="#best-practices">Best Practices</a></li>
</ol>
<h2 id="Introduction-Fundamentals"><a href="#Introduction-Fundamentals" class="headerlink" title="Introduction &amp; Fundamentals"></a>Introduction &amp; Fundamentals</h2><h3 id="What-is-dataclass-frozen-True"><a href="#What-is-dataclass-frozen-True" class="headerlink" title="What is @dataclass(frozen=True)?"></a>What is <code>@dataclass(frozen=True)</code>?</h3><p>The <code>@dataclass(frozen=True)</code> decorator in Python creates <strong>immutable data classes</strong> - classes primarily designed for storing data while enforcing <strong>strict immutability</strong> on their instances. Introduced in Python 3.7‚Äôs <code>dataclasses</code> module, it combines automatic method generation with functional programming principles.</p>
<h3 id="Core-Concept-Immutability-vs-Mutability"><a href="#Core-Concept-Immutability-vs-Mutability" class="headerlink" title="Core Concept: Immutability vs. Mutability"></a>Core Concept: Immutability vs. Mutability</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Mutable class (standard dataclass)</span></span><br><span class="line"><span class="meta">@dataclass</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MutablePoint</span>:</span><br><span class="line">    x: <span class="built_in">float</span></span><br><span class="line">    y: <span class="built_in">float</span></span><br><span class="line"></span><br><span class="line">p1 = MutablePoint(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">p1.x = <span class="number">3</span>  <span class="comment"># ‚úÖ Modification allowed</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Immutable class (frozen dataclass)</span></span><br><span class="line"><span class="meta">@dataclass(<span class="params">frozen=<span class="literal">True</span></span>)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ImmutablePoint</span>:</span><br><span class="line">    x: <span class="built_in">float</span></span><br><span class="line">    y: <span class="built_in">float</span></span><br><span class="line"></span><br><span class="line">p2 = ImmutablePoint(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">p2.x = <span class="number">3</span>  <span class="comment"># ‚ùå Raises FrozenInstanceError</span></span><br></pre></td></tr></table></figure>

<h2 id="How-It-Works-Internally"><a href="#How-It-Works-Internally" class="headerlink" title="How It Works Internally"></a>How It Works Internally</h2><h3 id="Automatic-Method-Generation"><a href="#Automatic-Method-Generation" class="headerlink" title="Automatic Method Generation"></a>Automatic Method Generation</h3><p>When you use <code>@dataclass(frozen=True)</code>, Python automatically generates these methods:</p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Purpose</th>
<th>Generated With <code>frozen=True</code></th>
</tr>
</thead>
<tbody><tr>
<td><code>__init__</code></td>
<td>Constructor</td>
<td>‚úÖ Yes</td>
</tr>
<tr>
<td><code>__repr__</code></td>
<td>String representation</td>
<td>‚úÖ Yes</td>
</tr>
<tr>
<td><code>__eq__</code></td>
<td>Equality comparison</td>
<td>‚úÖ Yes</td>
</tr>
<tr>
<td><code>__hash__</code></td>
<td>Hashing support</td>
<td>‚úÖ Yes (crucial!)</td>
</tr>
<tr>
<td><code>__setattr__</code></td>
<td>Attribute assignment</td>
<td>‚úÖ Modified to raise error</td>
</tr>
<tr>
<td><code>__delattr__</code></td>
<td>Attribute deletion</td>
<td>‚úÖ Modified to raise error</td>
</tr>
<tr>
<td><code>__lt__</code>, <code>__le__</code>, etc.</td>
<td>Comparisons</td>
<td>‚úÖ If <code>order=True</code></td>
</tr>
</tbody></table>
<h3 id="The-Magic-of-hash"><a href="#The-Magic-of-hash" class="headerlink" title="The Magic of __hash__"></a>The Magic of <code>__hash__</code></h3><p>The most important addition is <code>__hash__</code>:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@dataclass(<span class="params">frozen=<span class="literal">True</span></span>)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">User</span>:</span><br><span class="line">    <span class="built_in">id</span>: <span class="built_in">int</span></span><br><span class="line">    name: <span class="built_in">str</span></span><br><span class="line">    </span><br><span class="line"><span class="comment"># Objects are hashable and can be used in sets/dicts</span></span><br><span class="line">users_set = &#123;User(<span class="number">1</span>, <span class="string">&quot;Alice&quot;</span>), User(<span class="number">2</span>, <span class="string">&quot;Bob&quot;</span>)&#125;</span><br><span class="line">users_dict = &#123;User(<span class="number">1</span>, <span class="string">&quot;Alice&quot;</span>): <span class="string">&quot;admin&quot;</span>, User(<span class="number">2</span>, <span class="string">&quot;Bob&quot;</span>): <span class="string">&quot;user&quot;</span>&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Key Insight</strong>: Without <code>frozen=True</code>, dataclasses are <strong>unhashable by default</strong> unless you explicitly set <code>unsafe_hash=True</code>. With <code>frozen=True</code>, hashability comes for free.</p>
<h3 id="Implementation-Example"><a href="#Implementation-Example" class="headerlink" title="Implementation Example"></a>Implementation Example</h3><p>Here‚Äôs what Python essentially creates under the hood:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ImmutablePoint</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, x: <span class="built_in">float</span>, y: <span class="built_in">float</span></span>):</span><br><span class="line">        <span class="built_in">object</span>.__setattr__(<span class="variable language_">self</span>, <span class="string">&#x27;x&#x27;</span>, x)</span><br><span class="line">        <span class="built_in">object</span>.__setattr__(<span class="variable language_">self</span>, <span class="string">&#x27;y&#x27;</span>, y)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__setattr__</span>(<span class="params">self, name, value</span>):</span><br><span class="line">        <span class="keyword">raise</span> FrozenInstanceError(<span class="string">f&quot;cannot assign to field &#x27;<span class="subst">&#123;name&#125;</span>&#x27;&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__delattr__</span>(<span class="params">self, name</span>):</span><br><span class="line">        <span class="keyword">raise</span> FrozenInstanceError(<span class="string">f&quot;cannot delete field &#x27;<span class="subst">&#123;name&#125;</span>&#x27;&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__repr__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&quot;ImmutablePoint(x=<span class="subst">&#123;self.x&#125;</span>, y=<span class="subst">&#123;self.y&#125;</span>)&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__eq__</span>(<span class="params">self, other</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">isinstance</span>(other, ImmutablePoint):</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">NotImplemented</span></span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.x == other.x <span class="keyword">and</span> <span class="variable language_">self</span>.y == other.y</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__hash__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">hash</span>((<span class="variable language_">self</span>.x, <span class="variable language_">self</span>.y))</span><br></pre></td></tr></table></figure>

<h2 id="Practical-Benefits-Use-Cases"><a href="#Practical-Benefits-Use-Cases" class="headerlink" title="Practical Benefits &amp; Use Cases"></a>Practical Benefits &amp; Use Cases</h2><h3 id="1-Thread-Safety-Concurrency"><a href="#1-Thread-Safety-Concurrency" class="headerlink" title="1. Thread Safety &amp; Concurrency"></a>1. Thread Safety &amp; Concurrency</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> threading <span class="keyword">import</span> Thread</span><br><span class="line"><span class="keyword">from</span> dataclasses <span class="keyword">import</span> dataclass</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="meta">@dataclass(<span class="params">frozen=<span class="literal">True</span></span>)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SharedConfig</span>:</span><br><span class="line">    max_connections: <span class="built_in">int</span></span><br><span class="line">    timeout: <span class="built_in">int</span></span><br><span class="line">    api_key: <span class="built_in">str</span></span><br><span class="line"></span><br><span class="line">config = SharedConfig(max_connections=<span class="number">100</span>, timeout=<span class="number">30</span>, api_key=<span class="string">&quot;secret&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Multiple threads can safely read without locks</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">worker</span>(<span class="params">config: SharedConfig, thread_id: <span class="built_in">int</span></span>):</span><br><span class="line">    <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;Thread <span class="subst">&#123;thread_id&#125;</span>: Max connections = <span class="subst">&#123;config.max_connections&#125;</span>&quot;</span>)</span><br><span class="line">        time.sleep(<span class="number">0.1</span>)</span><br><span class="line"></span><br><span class="line">threads = [Thread(target=worker, args=(config, i)) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>)]</span><br><span class="line"><span class="keyword">for</span> t <span class="keyword">in</span> threads:</span><br><span class="line">    t.start()</span><br><span class="line"><span class="keyword">for</span> t <span class="keyword">in</span> threads:</span><br><span class="line">    t.join()</span><br></pre></td></tr></table></figure>

<h3 id="2-Dictionary-Keys-Set-Elements"><a href="#2-Dictionary-Keys-Set-Elements" class="headerlink" title="2. Dictionary Keys &amp; Set Elements"></a>2. Dictionary Keys &amp; Set Elements</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@dataclass(<span class="params">frozen=<span class="literal">True</span></span>)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Coordinate</span>:</span><br><span class="line">    x: <span class="built_in">int</span></span><br><span class="line">    y: <span class="built_in">int</span></span><br><span class="line">    z: <span class="built_in">int</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Create a cache of computed values</span></span><br><span class="line">cache = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">compute_value</span>(<span class="params">coord: Coordinate</span>) -&gt; <span class="built_in">float</span>:</span><br><span class="line">    <span class="keyword">if</span> coord <span class="keyword">in</span> cache:  <span class="comment"># ‚úÖ Can use as dict key</span></span><br><span class="line">        <span class="keyword">return</span> cache[coord]</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># Expensive computation</span></span><br><span class="line">    result = (coord.x ** <span class="number">2</span> + coord.y ** <span class="number">2</span> + coord.z ** <span class="number">2</span>) ** <span class="number">0.5</span></span><br><span class="line">    cache[coord] = result</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create a set of unique coordinates</span></span><br><span class="line">unique_points = &#123;</span><br><span class="line">    Coordinate(<span class="number">1</span>, <span class="number">2</span>),</span><br><span class="line">    Coordinate(<span class="number">1</span>, <span class="number">2</span>),  <span class="comment"># Duplicate - will be ignored</span></span><br><span class="line">    Coordinate(<span class="number">3</span>, <span class="number">4</span>),</span><br><span class="line">    Coordinate(<span class="number">1</span>, <span class="number">2</span>, <span class="number">5</span>),  <span class="comment"># Different because z=5</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Unique points: <span class="subst">&#123;<span class="built_in">len</span>(unique_points)&#125;</span>&quot;</span>)  <span class="comment"># 3</span></span><br></pre></td></tr></table></figure>

<h3 id="3-Functional-Programming-Patterns"><a href="#3-Functional-Programming-Patterns" class="headerlink" title="3. Functional Programming Patterns"></a>3. Functional Programming Patterns</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> dataclasses <span class="keyword">import</span> dataclass</span><br><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">List</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@dataclass(<span class="params">frozen=<span class="literal">True</span></span>)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ShoppingCart</span>:</span><br><span class="line">    items: <span class="built_in">tuple</span>[<span class="built_in">str</span>, ...]  <span class="comment"># Use tuple for immutability</span></span><br><span class="line">    discount: <span class="built_in">float</span> = <span class="number">0.0</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">add_item</span>(<span class="params">self, item: <span class="built_in">str</span></span>) -&gt; <span class="string">&#x27;ShoppingCart&#x27;</span>:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;Return a NEW cart with the added item&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">from</span> dataclasses <span class="keyword">import</span> replace</span><br><span class="line">        <span class="keyword">return</span> replace(<span class="variable language_">self</span>, items=<span class="variable language_">self</span>.items + (item,))</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">apply_discount</span>(<span class="params">self, new_discount: <span class="built_in">float</span></span>) -&gt; <span class="string">&#x27;ShoppingCart&#x27;</span>:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;Return a NEW cart with updated discount&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">from</span> dataclasses <span class="keyword">import</span> replace</span><br><span class="line">        <span class="keyword">return</span> replace(<span class="variable language_">self</span>, discount=new_discount)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Original cart remains unchanged</span></span><br><span class="line">cart1 = ShoppingCart(items=(<span class="string">&quot;apple&quot;</span>, <span class="string">&quot;banana&quot;</span>))</span><br><span class="line">cart2 = cart1.add_item(<span class="string">&quot;orange&quot;</span>)</span><br><span class="line">cart3 = cart2.apply_discount(<span class="number">0.1</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Cart1: <span class="subst">&#123;cart1&#125;</span>&quot;</span>)  <span class="comment"># Items: (&#x27;apple&#x27;, &#x27;banana&#x27;), Discount: 0.0</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Cart2: <span class="subst">&#123;cart2&#125;</span>&quot;</span>)  <span class="comment"># Items: (&#x27;apple&#x27;, &#x27;banana&#x27;, &#x27;orange&#x27;), Discount: 0.0</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Cart3: <span class="subst">&#123;cart3&#125;</span>&quot;</span>)  <span class="comment"># Items: (&#x27;apple&#x27;, &#x27;banana&#x27;, &#x27;orange&#x27;), Discount: 0.1</span></span><br></pre></td></tr></table></figure>

<h3 id="4-Configuration-Objects"><a href="#4-Configuration-Objects" class="headerlink" title="4. Configuration Objects"></a>4. Configuration Objects</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@dataclass(<span class="params">frozen=<span class="literal">True</span></span>)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">DatabaseConfig</span>:</span><br><span class="line">    host: <span class="built_in">str</span></span><br><span class="line">    port: <span class="built_in">int</span></span><br><span class="line">    database: <span class="built_in">str</span></span><br><span class="line">    username: <span class="built_in">str</span></span><br><span class="line">    password: <span class="built_in">str</span>  <span class="comment"># In reality, use a proper secrets manager</span></span><br><span class="line">    </span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">connection_string</span>(<span class="params">self</span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&quot;postgresql://<span class="subst">&#123;self.username&#125;</span>:<span class="subst">&#123;self.password&#125;</span>@<span class="subst">&#123;self.host&#125;</span>:<span class="subst">&#123;self.port&#125;</span>/<span class="subst">&#123;self.database&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Safe to pass around - no accidental modifications</span></span><br><span class="line">config = DatabaseConfig(</span><br><span class="line">    host=<span class="string">&quot;localhost&quot;</span>,</span><br><span class="line">    port=<span class="number">5432</span>,</span><br><span class="line">    database=<span class="string">&quot;mydb&quot;</span>,</span><br><span class="line">    username=<span class="string">&quot;admin&quot;</span>,</span><br><span class="line">    password=<span class="string">&quot;secret123&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Can be safely stored in a module-level constant</span></span><br><span class="line">DEFAULT_CONFIG = DatabaseConfig(</span><br><span class="line">    host=<span class="string">&quot;prod-db.example.com&quot;</span>,</span><br><span class="line">    port=<span class="number">5432</span>,</span><br><span class="line">    database=<span class="string">&quot;production&quot;</span>,</span><br><span class="line">    username=<span class="string">&quot;readonly&quot;</span>,</span><br><span class="line">    password=<span class="string">&quot;readonly123&quot;</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h2 id="The-Shallow-Freezing-Caveat"><a href="#The-Shallow-Freezing-Caveat" class="headerlink" title="The Shallow Freezing Caveat"></a>The Shallow Freezing Caveat</h2><h3 id="Understanding-the-Limitation"><a href="#Understanding-the-Limitation" class="headerlink" title="Understanding the Limitation"></a>Understanding the Limitation</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> dataclasses <span class="keyword">import</span> dataclass</span><br><span class="line"></span><br><span class="line"><span class="meta">@dataclass(<span class="params">frozen=<span class="literal">True</span></span>)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Company</span>:</span><br><span class="line">    name: <span class="built_in">str</span></span><br><span class="line">    employees: <span class="built_in">list</span>[<span class="built_in">str</span>]  <span class="comment"># üö® Mutable type!</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Create an instance</span></span><br><span class="line">google = Company(<span class="string">&quot;Google&quot;</span>, [<span class="string">&quot;Alice&quot;</span>, <span class="string">&quot;Bob&quot;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># This is blocked (good):</span></span><br><span class="line"><span class="comment"># google.name = &quot;Alphabet&quot;  # ‚ùå FrozenInstanceError</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># This still works (problematic):</span></span><br><span class="line">google.employees.append(<span class="string">&quot;Charlie&quot;</span>)  <span class="comment"># ‚úÖ No error!</span></span><br><span class="line"><span class="built_in">print</span>(google.employees)  <span class="comment"># [&#x27;Alice&#x27;, &#x27;Bob&#x27;, &#x27;Charlie&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># The list itself is mutable, even though the field reference is frozen</span></span><br></pre></td></tr></table></figure>

<h3 id="Solutions-for-Deep-Immutability"><a href="#Solutions-for-Deep-Immutability" class="headerlink" title="Solutions for Deep Immutability"></a>Solutions for Deep Immutability</h3><p><strong>Option 1: Use Immutable Types</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">Tuple</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@dataclass(<span class="params">frozen=<span class="literal">True</span></span>)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ImmutableCompany</span>:</span><br><span class="line">    name: <span class="built_in">str</span></span><br><span class="line">    employees: <span class="type">Tuple</span>[<span class="built_in">str</span>, ...]  <span class="comment"># ‚úÖ Tuple is immutable</span></span><br><span class="line">    </span><br><span class="line">company = ImmutableCompany(<span class="string">&quot;Google&quot;</span>, (<span class="string">&quot;Alice&quot;</span>, <span class="string">&quot;Bob&quot;</span>))</span><br><span class="line"><span class="comment"># company.employees.append(&quot;Charlie&quot;)  # ‚ùå AttributeError: &#x27;tuple&#x27; object has no attribute &#x27;append&#x27;</span></span><br></pre></td></tr></table></figure>

<p><strong>Option 2: Convert to Immutable in <code>__post_init__</code></strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> dataclasses <span class="keyword">import</span> dataclass, field</span><br><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">List</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@dataclass(<span class="params">frozen=<span class="literal">True</span></span>)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SafeCompany</span>:</span><br><span class="line">    name: <span class="built_in">str</span></span><br><span class="line">    employees: <span class="type">List</span>[<span class="built_in">str</span>] = field(default_factory=<span class="built_in">list</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__post_init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># Convert list to tuple after initialization</span></span><br><span class="line">        <span class="built_in">object</span>.__setattr__(<span class="variable language_">self</span>, <span class="string">&#x27;employees&#x27;</span>, <span class="built_in">tuple</span>(<span class="variable language_">self</span>.employees))</span><br><span class="line"></span><br><span class="line">company = SafeCompany(<span class="string">&quot;Google&quot;</span>, [<span class="string">&quot;Alice&quot;</span>, <span class="string">&quot;Bob&quot;</span>])</span><br><span class="line"><span class="built_in">print</span>(company.employees)  <span class="comment"># (&#x27;Alice&#x27;, &#x27;Bob&#x27;)</span></span><br><span class="line"><span class="comment"># company.employees.append(&quot;Charlie&quot;)  # ‚ùå AttributeError</span></span><br></pre></td></tr></table></figure>

<p><strong>Option 3: Use <code>functools.cached_property</code> for Computed Mutable Data</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> dataclasses <span class="keyword">import</span> dataclass</span><br><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> cached_property</span><br><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">Dict</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@dataclass(<span class="params">frozen=<span class="literal">True</span></span>)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Analytics</span>:</span><br><span class="line">    user_ids: <span class="type">Tuple</span>[<span class="built_in">int</span>, ...]</span><br><span class="line">    </span><br><span class="line"><span class="meta">    @cached_property</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">user_id_to_index</span>(<span class="params">self</span>) -&gt; <span class="type">Dict</span>[<span class="built_in">int</span>, <span class="built_in">int</span>]:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;Compute once, cache forever&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">return</span> &#123;user_id: idx <span class="keyword">for</span> idx, user_id <span class="keyword">in</span> <span class="built_in">enumerate</span>(<span class="variable language_">self</span>.user_ids)&#125;</span><br><span class="line"></span><br><span class="line">analytics = Analytics((<span class="number">101</span>, <span class="number">102</span>, <span class="number">103</span>))</span><br><span class="line"><span class="built_in">print</span>(analytics.user_id_to_index)  <span class="comment"># &#123;101: 0, 102: 1, 103: 2&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="Working-with-Immutable-Objects"><a href="#Working-with-Immutable-Objects" class="headerlink" title="Working with Immutable Objects"></a>Working with Immutable Objects</h2><h3 id="The-replace-Function-Pattern"><a href="#The-replace-Function-Pattern" class="headerlink" title="The replace() Function Pattern"></a>The <code>replace()</code> Function Pattern</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> dataclasses <span class="keyword">import</span> dataclass, replace</span><br><span class="line"></span><br><span class="line"><span class="meta">@dataclass(<span class="params">frozen=<span class="literal">True</span></span>)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserProfile</span>:</span><br><span class="line">    username: <span class="built_in">str</span></span><br><span class="line">    email: <span class="built_in">str</span></span><br><span class="line">    is_active: <span class="built_in">bool</span> = <span class="literal">True</span></span><br><span class="line">    permissions: <span class="type">Tuple</span>[<span class="built_in">str</span>, ...] = ()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">deactivate</span>(<span class="params">self</span>) -&gt; <span class="string">&#x27;UserProfile&#x27;</span>:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;Functional style: return new object with changes&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">return</span> replace(<span class="variable language_">self</span>, is_active=<span class="literal">False</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">add_permission</span>(<span class="params">self, permission: <span class="built_in">str</span></span>) -&gt; <span class="string">&#x27;UserProfile&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> replace(</span><br><span class="line">            <span class="variable language_">self</span>, </span><br><span class="line">            permissions=<span class="variable language_">self</span>.permissions + (permission,)</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line"><span class="comment"># Chain updates functionally</span></span><br><span class="line">user = UserProfile(<span class="string">&quot;alice&quot;</span>, <span class="string">&quot;alice@example.com&quot;</span>)</span><br><span class="line">user = user.add_permission(<span class="string">&quot;read&quot;</span>).add_permission(<span class="string">&quot;write&quot;</span>)</span><br><span class="line">user = user.deactivate()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(user)  <span class="comment"># UserProfile(username=&#x27;alice&#x27;, email=&#x27;alice@example.com&#x27;, is_active=False, permissions=(&#x27;read&#x27;, &#x27;write&#x27;))</span></span><br></pre></td></tr></table></figure>

<h3 id="Bulk-Updates-with-Dictionary-Unpacking"><a href="#Bulk-Updates-with-Dictionary-Unpacking" class="headerlink" title="Bulk Updates with Dictionary Unpacking"></a>Bulk Updates with Dictionary Unpacking</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@dataclass(<span class="params">frozen=<span class="literal">True</span></span>)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Settings</span>:</span><br><span class="line">    theme: <span class="built_in">str</span></span><br><span class="line">    language: <span class="built_in">str</span></span><br><span class="line">    notifications: <span class="built_in">bool</span></span><br><span class="line">    timeout: <span class="built_in">int</span></span><br><span class="line"></span><br><span class="line">settings = Settings(<span class="string">&quot;dark&quot;</span>, <span class="string">&quot;en&quot;</span>, <span class="literal">True</span>, <span class="number">30</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Update multiple fields at once</span></span><br><span class="line">new_settings = replace(</span><br><span class="line">    settings,</span><br><span class="line">    **&#123;<span class="string">&quot;theme&quot;</span>: <span class="string">&quot;light&quot;</span>, <span class="string">&quot;notifications&quot;</span>: <span class="literal">False</span>&#125;  <span class="comment"># Can use dict unpacking</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Or with variable updates</span></span><br><span class="line">updates = &#123;&#125;</span><br><span class="line"><span class="keyword">if</span> user_prefers_light_mode:</span><br><span class="line">    updates[<span class="string">&quot;theme&quot;</span>] = <span class="string">&quot;light&quot;</span></span><br><span class="line"><span class="keyword">if</span> user_is_busy:</span><br><span class="line">    updates[<span class="string">&quot;notifications&quot;</span>] = <span class="literal">False</span></span><br><span class="line">    </span><br><span class="line">updated_settings = replace(settings, **updates)</span><br></pre></td></tr></table></figure>

<h3 id="Versioned-Data-with-Inheritance"><a href="#Versioned-Data-with-Inheritance" class="headerlink" title="Versioned Data with Inheritance"></a>Versioned Data with Inheritance</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> dataclasses <span class="keyword">import</span> dataclass</span><br><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">Optional</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@dataclass(<span class="params">frozen=<span class="literal">True</span></span>)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserV1</span>:</span><br><span class="line">    <span class="built_in">id</span>: <span class="built_in">int</span></span><br><span class="line">    name: <span class="built_in">str</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@dataclass(<span class="params">frozen=<span class="literal">True</span></span>)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserV2</span>(<span class="title class_ inherited__">UserV1</span>):</span><br><span class="line">    email: <span class="type">Optional</span>[<span class="built_in">str</span>] = <span class="literal">None</span></span><br><span class="line">    phone: <span class="type">Optional</span>[<span class="built_in">str</span>] = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Backward compatible</span></span><br><span class="line">v1_user = UserV1(<span class="number">1</span>, <span class="string">&quot;Alice&quot;</span>)</span><br><span class="line">v2_user = UserV2(<span class="number">1</span>, <span class="string">&quot;Alice&quot;</span>, email=<span class="string">&quot;alice@example.com&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Type checking works</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">process_user</span>(<span class="params">user: UserV1</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;Processing: <span class="subst">&#123;user.name&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">process_user(v1_user)  <span class="comment"># ‚úÖ</span></span><br><span class="line">process_user(v2_user)  <span class="comment"># ‚úÖ (inheritance)</span></span><br></pre></td></tr></table></figure>

<h2 id="Advanced-Patterns-Alternatives"><a href="#Advanced-Patterns-Alternatives" class="headerlink" title="Advanced Patterns &amp; Alternatives"></a>Advanced Patterns &amp; Alternatives</h2><h3 id="Pattern-1-Builder-Pattern-for-Complex-Objects"><a href="#Pattern-1-Builder-Pattern-for-Complex-Objects" class="headerlink" title="Pattern 1: Builder Pattern for Complex Objects"></a>Pattern 1: Builder Pattern for Complex Objects</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> dataclasses <span class="keyword">import</span> dataclass, field</span><br><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">List</span>, <span class="type">Optional</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@dataclass(<span class="params">frozen=<span class="literal">True</span></span>)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Query</span>:</span><br><span class="line">    table: <span class="built_in">str</span></span><br><span class="line">    columns: <span class="type">Tuple</span>[<span class="built_in">str</span>, ...]</span><br><span class="line">    filters: <span class="type">Tuple</span>[<span class="string">&#x27;Filter&#x27;</span>, ...]</span><br><span class="line">    limit: <span class="type">Optional</span>[<span class="built_in">int</span>] = <span class="literal">None</span></span><br><span class="line">    </span><br><span class="line"><span class="meta">    @dataclass</span></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Builder</span>:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;Mutable builder for immutable Query&quot;&quot;&quot;</span></span><br><span class="line">        table: <span class="built_in">str</span> = <span class="string">&quot;&quot;</span></span><br><span class="line">        columns: <span class="type">List</span>[<span class="built_in">str</span>] = field(default_factory=<span class="built_in">list</span>)</span><br><span class="line">        filters: <span class="type">List</span>[<span class="string">&#x27;Filter&#x27;</span>] = field(default_factory=<span class="built_in">list</span>)</span><br><span class="line">        limit: <span class="type">Optional</span>[<span class="built_in">int</span>] = <span class="literal">None</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">build</span>(<span class="params">self</span>) -&gt; <span class="string">&#x27;Query&#x27;</span>:</span><br><span class="line">            <span class="keyword">return</span> Query(</span><br><span class="line">                table=<span class="variable language_">self</span>.table,</span><br><span class="line">                columns=<span class="built_in">tuple</span>(<span class="variable language_">self</span>.columns),</span><br><span class="line">                filters=<span class="built_in">tuple</span>(<span class="variable language_">self</span>.filters),</span><br><span class="line">                limit=<span class="variable language_">self</span>.limit</span><br><span class="line">            )</span><br><span class="line">    </span><br><span class="line"><span class="meta">    @dataclass(<span class="params">frozen=<span class="literal">True</span></span>)</span></span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Filter</span>:</span><br><span class="line">        column: <span class="built_in">str</span></span><br><span class="line">        operator: <span class="built_in">str</span></span><br><span class="line">        value: <span class="built_in">any</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Usage</span></span><br><span class="line">builder = Query.Builder()</span><br><span class="line">builder.table = <span class="string">&quot;users&quot;</span></span><br><span class="line">builder.columns = [<span class="string">&quot;id&quot;</span>, <span class="string">&quot;name&quot;</span>, <span class="string">&quot;email&quot;</span>]</span><br><span class="line">builder.filters.append(Query.Filter(<span class="string">&quot;age&quot;</span>, <span class="string">&quot;&gt;&quot;</span>, <span class="number">18</span>))</span><br><span class="line">builder.limit = <span class="number">100</span></span><br><span class="line"></span><br><span class="line">query = builder.build()  <span class="comment"># ‚úÖ Immutable Query object</span></span><br></pre></td></tr></table></figure>

<h3 id="Pattern-2-Registry-Pattern-with-Frozen-Classes"><a href="#Pattern-2-Registry-Pattern-with-Frozen-Classes" class="headerlink" title="Pattern 2: Registry Pattern with Frozen Classes"></a>Pattern 2: Registry Pattern with Frozen Classes</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> dataclasses <span class="keyword">import</span> dataclass</span><br><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">Dict</span>, ClassVar</span><br><span class="line"></span><br><span class="line"><span class="meta">@dataclass(<span class="params">frozen=<span class="literal">True</span></span>)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ErrorCode</span>:</span><br><span class="line">    code: <span class="built_in">int</span></span><br><span class="line">    message: <span class="built_in">str</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># Registry of all error codes</span></span><br><span class="line">    _registry: ClassVar[<span class="type">Dict</span>[<span class="built_in">int</span>, <span class="string">&#x27;ErrorCode&#x27;</span>]] = &#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__post_init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment"># Register the instance</span></span><br><span class="line">        ErrorCode._registry[<span class="variable language_">self</span>.code] = <span class="variable language_">self</span></span><br><span class="line">    </span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get</span>(<span class="params">cls, code: <span class="built_in">int</span></span>) -&gt; <span class="string">&#x27;ErrorCode&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> cls._registry[code]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Define error codes (these become singletons)</span></span><br><span class="line">NOT_FOUND = ErrorCode(<span class="number">404</span>, <span class="string">&quot;Resource not found&quot;</span>)</span><br><span class="line">UNAUTHORIZED = ErrorCode(<span class="number">401</span>, <span class="string">&quot;Authentication required&quot;</span>)</span><br><span class="line">FORBIDDEN = ErrorCode(<span class="number">403</span>, <span class="string">&quot;Insufficient permissions&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Safe to use anywhere</span></span><br><span class="line"><span class="built_in">print</span>(ErrorCode.get(<span class="number">404</span>))  <span class="comment"># ErrorCode(code=404, message=&#x27;Resource not found&#x27;)</span></span><br></pre></td></tr></table></figure>

<h3 id="Alternative-1-collections-namedtuple"><a href="#Alternative-1-collections-namedtuple" class="headerlink" title="Alternative 1: collections.namedtuple"></a>Alternative 1: <code>collections.namedtuple</code></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> namedtuple</span><br><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> NamedTuple</span><br><span class="line"></span><br><span class="line"><span class="comment"># Basic immutable structure</span></span><br><span class="line">Point = namedtuple(<span class="string">&#x27;Point&#x27;</span>, [<span class="string">&#x27;x&#x27;</span>, <span class="string">&#x27;y&#x27;</span>])</span><br><span class="line">p = Point(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"><span class="comment"># p.x = 3  # ‚ùå AttributeError: can&#x27;t set attribute</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># With type hints (Python 3.6+)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PointNT</span>(<span class="title class_ inherited__">NamedTuple</span>):</span><br><span class="line">    x: <span class="built_in">float</span></span><br><span class="line">    y: <span class="built_in">float</span></span><br><span class="line">    z: <span class="built_in">float</span> = <span class="number">0.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Limitations: Less flexible than dataclasses, no easy field defaults</span></span><br></pre></td></tr></table></figure>

<h3 id="Alternative-2-attrs-Library"><a href="#Alternative-2-attrs-Library" class="headerlink" title="Alternative 2: attrs Library"></a>Alternative 2: <code>attrs</code> Library</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> attr</span><br><span class="line"></span><br><span class="line"><span class="meta">@attr.s(<span class="params">frozen=<span class="literal">True</span>, slots=<span class="literal">True</span></span>)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AttrsPoint</span>:</span><br><span class="line">    x: <span class="built_in">float</span> = attr.ib()</span><br><span class="line">    y: <span class="built_in">float</span> = attr.ib()</span><br><span class="line">    color: <span class="built_in">str</span> = attr.ib(default=<span class="string">&quot;blue&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Additional features like validators, converters</span></span><br><span class="line"><span class="meta">@attr.s(<span class="params">frozen=<span class="literal">True</span></span>)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ValidatedPoint</span>:</span><br><span class="line">    x: <span class="built_in">float</span> = attr.ib(validator=attr.validators.instance_of(<span class="built_in">float</span>))</span><br><span class="line">    y: <span class="built_in">float</span> = attr.ib(validator=attr.validators.instance_of(<span class="built_in">float</span>))</span><br></pre></td></tr></table></figure>

<h2 id="Performance-Considerations"><a href="#Performance-Considerations" class="headerlink" title="Performance Considerations"></a>Performance Considerations</h2><h3 id="Memory-and-Speed-Implications"><a href="#Memory-and-Speed-Implications" class="headerlink" title="Memory and Speed Implications"></a>Memory and Speed Implications</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> timeit</span><br><span class="line"><span class="keyword">from</span> dataclasses <span class="keyword">import</span> dataclass, make_dataclass</span><br><span class="line"><span class="keyword">from</span> pympler <span class="keyword">import</span> asizeof</span><br><span class="line"></span><br><span class="line"><span class="meta">@dataclass(<span class="params">frozen=<span class="literal">True</span></span>)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">FrozenUser</span>:</span><br><span class="line">    <span class="built_in">id</span>: <span class="built_in">int</span></span><br><span class="line">    name: <span class="built_in">str</span></span><br><span class="line">    email: <span class="built_in">str</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@dataclass</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MutableUser</span>:</span><br><span class="line">    <span class="built_in">id</span>: <span class="built_in">int</span></span><br><span class="line">    name: <span class="built_in">str</span></span><br><span class="line">    email: <span class="built_in">str</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Memory usage</span></span><br><span class="line">frozen = FrozenUser(<span class="number">1</span>, <span class="string">&quot;Alice&quot;</span>, <span class="string">&quot;alice@example.com&quot;</span>)</span><br><span class="line">mutable = MutableUser(<span class="number">1</span>, <span class="string">&quot;Alice&quot;</span>, <span class="string">&quot;alice@example.com&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Frozen size: <span class="subst">&#123;asizeof.asizeof(frozen)&#125;</span> bytes&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Mutable size: <span class="subst">&#123;asizeof.asizeof(mutable)&#125;</span> bytes&quot;</span>)</span><br><span class="line"><span class="comment"># Typically very similar - frozen might be slightly larger due to __hash__</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Creation speed</span></span><br><span class="line">setup = <span class="string">&quot;from __main__ import FrozenUser, MutableUser&quot;</span></span><br><span class="line">stmt_frozen = <span class="string">&quot;FrozenUser(1, &#x27;Alice&#x27;, &#x27;alice@example.com&#x27;)&quot;</span></span><br><span class="line">stmt_mutable = <span class="string">&quot;MutableUser(1, &#x27;Alice&#x27;, &#x27;alice@example.com&#x27;)&quot;</span></span><br><span class="line"></span><br><span class="line">time_frozen = timeit.timeit(stmt_frozen, setup=setup, number=<span class="number">1000000</span>)</span><br><span class="line">time_mutable = timeit.timeit(stmt_mutable, setup=setup, number=<span class="number">1000000</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Frozen creation: <span class="subst">&#123;time_frozen:<span class="number">.3</span>f&#125;</span>s&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Mutable creation: <span class="subst">&#123;time_mutable:<span class="number">.3</span>f&#125;</span>s&quot;</span>)</span><br><span class="line"><span class="comment"># Frozen is slightly slower due to additional checks</span></span><br></pre></td></tr></table></figure>

<h3 id="When-Performance-Matters"><a href="#When-Performance-Matters" class="headerlink" title="When Performance Matters"></a>When Performance Matters</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># For high-performance scenarios, consider __slots__</span></span><br><span class="line"><span class="meta">@dataclass(<span class="params">frozen=<span class="literal">True</span></span>)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">OptimizedPoint</span>:</span><br><span class="line">    __slots__ = (<span class="string">&#x27;x&#x27;</span>, <span class="string">&#x27;y&#x27;</span>, <span class="string">&#x27;z&#x27;</span>)  <span class="comment"># Reduces memory overhead</span></span><br><span class="line">    x: <span class="built_in">float</span></span><br><span class="line">    y: <span class="built_in">float</span></span><br><span class="line">    z: <span class="built_in">float</span> = <span class="number">0.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Or use tuple directly for maximum performance</span></span><br><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> NamedTuple</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PointNT</span>(<span class="title class_ inherited__">NamedTuple</span>):</span><br><span class="line">    x: <span class="built_in">float</span></span><br><span class="line">    y: <span class="built_in">float</span></span><br><span class="line">    z: <span class="built_in">float</span> = <span class="number">0.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Benchmark: NamedTuple is fastest for creation and memory</span></span><br></pre></td></tr></table></figure>

<h2 id="Best-Practices"><a href="#Best-Practices" class="headerlink" title="Best Practices"></a>Best Practices</h2><h3 id="1-Default-to-Frozen"><a href="#1-Default-to-Frozen" class="headerlink" title="1. Default to Frozen"></a>1. <strong>Default to Frozen</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Good: Start with frozen, relax only if needed</span></span><br><span class="line"><span class="meta">@dataclass(<span class="params">frozen=<span class="literal">True</span></span>)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Config</span>:</span><br><span class="line">    api_key: <span class="built_in">str</span></span><br><span class="line">    timeout: <span class="built_in">int</span> = <span class="number">30</span></span><br><span class="line">    retries: <span class="built_in">int</span> = <span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Only make mutable if you have a proven need</span></span><br><span class="line"><span class="meta">@dataclass  </span><span class="comment"># No frozen - use sparingly!</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Session</span>:</span><br><span class="line">    user_id: <span class="built_in">int</span></span><br><span class="line">    token: <span class="built_in">str</span></span><br><span class="line">    expiry: <span class="built_in">float</span></span><br></pre></td></tr></table></figure>

<h3 id="2-Use-Immutable-Field-Types"><a href="#2-Use-Immutable-Field-Types" class="headerlink" title="2. Use Immutable Field Types"></a>2. <strong>Use Immutable Field Types</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">Tuple</span>, FrozenSet</span><br><span class="line"></span><br><span class="line"><span class="meta">@dataclass(<span class="params">frozen=<span class="literal">True</span></span>)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ImmutableData</span>:</span><br><span class="line">    <span class="comment"># Good: Immutable types</span></span><br><span class="line">    ids: <span class="type">Tuple</span>[<span class="built_in">int</span>, ...]</span><br><span class="line">    tags: FrozenSet[<span class="built_in">str</span>]</span><br><span class="line">    name: <span class="built_in">str</span></span><br><span class="line">    count: <span class="built_in">int</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># Avoid (unless converted in __post_init__):</span></span><br><span class="line">    <span class="comment"># items: List[str]  # ‚ùå</span></span><br><span class="line">    <span class="comment"># config: Dict[str, Any]  # ‚ùå</span></span><br></pre></td></tr></table></figure>

<h3 id="3-Implement-Domain-Logic-as-Methods"><a href="#3-Implement-Domain-Logic-as-Methods" class="headerlink" title="3. Implement Domain Logic as Methods"></a>3. <strong>Implement Domain Logic as Methods</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@dataclass(<span class="params">frozen=<span class="literal">True</span></span>)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Money</span>:</span><br><span class="line">    amount: <span class="built_in">float</span></span><br><span class="line">    currency: <span class="built_in">str</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">self, other: <span class="string">&#x27;Money&#x27;</span></span>) -&gt; <span class="string">&#x27;Money&#x27;</span>:</span><br><span class="line">        <span class="keyword">if</span> <span class="variable language_">self</span>.currency != other.currency:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">&quot;Currencies must match&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> replace(<span class="variable language_">self</span>, amount=<span class="variable language_">self</span>.amount + other.amount)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">convert</span>(<span class="params">self, rate: <span class="built_in">float</span>, target_currency: <span class="built_in">str</span></span>) -&gt; <span class="string">&#x27;Money&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> Money(amount=<span class="variable language_">self</span>.amount * rate, currency=target_currency)</span><br><span class="line"></span><br><span class="line">usd = Money(<span class="number">100</span>, <span class="string">&quot;USD&quot;</span>)</span><br><span class="line">eur = usd.convert(<span class="number">0.85</span>, <span class="string">&quot;EUR&quot;</span>)</span><br><span class="line">total = usd.add(Money(<span class="number">50</span>, <span class="string">&quot;USD&quot;</span>))</span><br></pre></td></tr></table></figure>

<h3 id="4-Combine-with-kw-only-for-Clarity"><a href="#4-Combine-with-kw-only-for-Clarity" class="headerlink" title="4. Combine with kw_only for Clarity"></a>4. <strong>Combine with <code>kw_only</code> for Clarity</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@dataclass(<span class="params">frozen=<span class="literal">True</span>, kw_only=<span class="literal">True</span></span>)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ServerConfig</span>:</span><br><span class="line">    host: <span class="built_in">str</span></span><br><span class="line">    port: <span class="built_in">int</span></span><br><span class="line">    ssl: <span class="built_in">bool</span> = <span class="literal">True</span></span><br><span class="line">    timeout: <span class="built_in">int</span> = <span class="number">30</span></span><br><span class="line">    </span><br><span class="line"><span class="comment"># Forces explicit parameter names</span></span><br><span class="line">config = ServerConfig(host=<span class="string">&quot;example.com&quot;</span>, port=<span class="number">443</span>)</span><br><span class="line"><span class="comment"># Not: ServerConfig(&quot;example.com&quot;, 443)  # ‚ùå</span></span><br></pre></td></tr></table></figure>

<h3 id="5-Document-Frozen-Assumptions"><a href="#5-Document-Frozen-Assumptions" class="headerlink" title="5. Document Frozen Assumptions"></a>5. <strong>Document Frozen Assumptions</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@dataclass(<span class="params">frozen=<span class="literal">True</span></span>)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">APIResponse</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Immutable response from API.</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    This class is frozen to ensure:</span></span><br><span class="line"><span class="string">    1. Thread safety when sharing between components</span></span><br><span class="line"><span class="string">    2. Hashability for caching</span></span><br><span class="line"><span class="string">    3. Predictable behavior in functional pipelines</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    Use `dataclasses.replace()` to create modified copies.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    status: <span class="built_in">int</span></span><br><span class="line">    data: <span class="built_in">dict</span></span><br><span class="line">    headers: <span class="type">Tuple</span>[<span class="type">Tuple</span>[<span class="built_in">str</span>, <span class="built_in">str</span>], ...]</span><br></pre></td></tr></table></figure>

<h2 id="Common-Pitfalls-and-Solutions"><a href="#Common-Pitfalls-and-Solutions" class="headerlink" title="Common Pitfalls and Solutions"></a>Common Pitfalls and Solutions</h2><h3 id="Pitfall-1-Inadvertent-Mutation-of-Nested-Objects"><a href="#Pitfall-1-Inadvertent-Mutation-of-Nested-Objects" class="headerlink" title="Pitfall 1: Inadvertent Mutation of Nested Objects"></a>Pitfall 1: Inadvertent Mutation of Nested Objects</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ‚ùå Problem</span></span><br><span class="line"><span class="meta">@dataclass(<span class="params">frozen=<span class="literal">True</span></span>)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Graph</span>:</span><br><span class="line">    nodes: <span class="built_in">dict</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ‚úÖ Solution</span></span><br><span class="line"><span class="meta">@dataclass(<span class="params">frozen=<span class="literal">True</span></span>)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Graph</span>:</span><br><span class="line">    nodes: frozendict  <span class="comment"># Requires &#x27;frozendict&#x27; package</span></span><br><span class="line">    <span class="comment"># OR</span></span><br><span class="line">    nodes: Mapping[<span class="built_in">str</span>, <span class="type">Any</span>]  <span class="comment"># Read-only interface</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ‚úÖ Better Solution</span></span><br><span class="line"><span class="meta">@dataclass(<span class="params">frozen=<span class="literal">True</span></span>)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Graph</span>:</span><br><span class="line">    _nodes: <span class="built_in">dict</span> = field(default_factory=<span class="built_in">dict</span>, <span class="built_in">repr</span>=<span class="literal">False</span>)</span><br><span class="line">    </span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">nodes</span>(<span class="params">self</span>) -&gt; Mapping[<span class="built_in">str</span>, <span class="type">Any</span>]:</span><br><span class="line">        <span class="keyword">return</span> MappingProxyType(<span class="variable language_">self</span>._nodes)  <span class="comment"># Read-only view</span></span><br></pre></td></tr></table></figure>

<h3 id="Pitfall-2-Circular-References"><a href="#Pitfall-2-Circular-References" class="headerlink" title="Pitfall 2: Circular References"></a>Pitfall 2: Circular References</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">Optional</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@dataclass(<span class="params">frozen=<span class="literal">True</span></span>)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TreeNode</span>:</span><br><span class="line">    value: <span class="built_in">any</span></span><br><span class="line">    left: <span class="type">Optional</span>[<span class="string">&#x27;TreeNode&#x27;</span>] = <span class="literal">None</span></span><br><span class="line">    right: <span class="type">Optional</span>[<span class="string">&#x27;TreeNode&#x27;</span>] = <span class="literal">None</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># This works! Frozen doesn&#x27;t prevent object graph formation</span></span><br><span class="line">    <span class="comment"># It only prevents reassignment of the fields themselves</span></span><br></pre></td></tr></table></figure>

<h3 id="Pitfall-3-Serialization-Issues"><a href="#Pitfall-3-Serialization-Issues" class="headerlink" title="Pitfall 3: Serialization Issues"></a>Pitfall 3: Serialization Issues</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">from</span> dataclasses <span class="keyword">import</span> dataclass, asdict</span><br><span class="line"></span><br><span class="line"><span class="meta">@dataclass(<span class="params">frozen=<span class="literal">True</span></span>)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Data</span>:</span><br><span class="line">    x: <span class="built_in">int</span></span><br><span class="line">    y: <span class="built_in">int</span></span><br><span class="line"></span><br><span class="line">d = Data(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Standard serialization works</span></span><br><span class="line">json_str = json.dumps(asdict(d))</span><br><span class="line"></span><br><span class="line"><span class="comment"># For custom serialization, implement __json__ or use a mixin</span></span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">from</span> abc <span class="keyword">import</span> ABC</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">JSONSerializable</span>(<span class="title class_ inherited__">ABC</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">to_json</span>(<span class="params">self</span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">        <span class="keyword">return</span> json.dumps(asdict(<span class="variable language_">self</span>))</span><br><span class="line"></span><br><span class="line"><span class="meta">@dataclass(<span class="params">frozen=<span class="literal">True</span></span>)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">JsonData</span>(<span class="title class_ inherited__">JSONSerializable</span>):</span><br><span class="line">    x: <span class="built_in">int</span></span><br><span class="line">    y: <span class="built_in">int</span></span><br></pre></td></tr></table></figure>

<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p><code>@dataclass(frozen=True)</code> is a powerful tool that brings functional programming benefits to Python‚Äôs object-oriented world. It provides:</p>
<ol>
<li><strong>Safety</strong> through immutability</li>
<li><strong>Convenience</strong> through automatic method generation</li>
<li><strong>Expressiveness</strong> through clean, declarative syntax</li>
<li><strong>Performance</strong> through hashability and thread safety</li>
</ol>
<p>While the ‚Äúshallow freezing‚Äù limitation requires attention, following the patterns and best practices outlined above will help you create robust, maintainable, and bug-resistant data models in Python.</p>
<p><strong>When to use it</strong>: Configuration objects, value objects, messages&#x2F;events, cache keys, shared state in concurrent systems, and anywhere you want to enforce the principle of ‚Äúno surprises.‚Äù</p>
<p><strong>When to avoid it</strong>: When you genuinely need mutable state, when working with large object graphs that change frequently, or when the performance overhead of copying is prohibitive.</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Python/" rel="tag"><i class="fa fa-tag"></i> Python</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2025/12/16/Referential-Transparency-RT-Concept/" rel="prev" title="Referential Transparency (RT) Concept">
                  <i class="fa fa-angle-left"></i> Referential Transparency (RT) Concept
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2025/12/17/Python-m-Flag-Explained-Module-Mode-Execution/" rel="next" title="Python -m Flag Explained: Module Mode Execution">
                  Python -m Flag Explained: Module Mode Execution <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Dazhi Zhang</span>
  </div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  

  <script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"default","dark":"dark"},"js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.9.1/mermaid.min.js","integrity":"sha256-YbM1pG3wWnzhyYN49g5fPnen+2CKEFaZfopkkwSpNtY="}}</script>
  <script src="/js/third-party/tags/mermaid.js"></script>





  





</body>
</html>
